"use strict";(self.webpackChunksite_docusaurus_template=self.webpackChunksite_docusaurus_template||[]).push([[1821],{82927:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>c,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"children/singletons","title":"The Singleton Pattern","description":"The lab handout uses Super Mario Bros as assets to demonstrate certain Unity features and functionalities. You are free to follow along and submit it for checkoff, OR you can also create an entirely new project to demonstrate the requested feature(s).","source":"@site/docs/04-children/singletons.md","sourceDirName":"04-children","slug":"/children/singletons","permalink":"/50033/docs/children/singletons","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Unity for Children","permalink":"/50033/docs/category/unity-for-children"},"next":{"title":"C# Quick Tour","permalink":"/50033/docs/children/static"}}');var a=t(74848),i=t(28453),o=(t(53398),t(19894),t(88761)),r=(t(89166),t(384));t(72206),t(82223);const c={sidebar_position:1},l="The Singleton Pattern",d={},h=[{value:"C#: Static Variable",id:"c-static-variable",level:3},{value:"C#: Properties",id:"c-properties",level:3},{value:"Singleton Class",id:"singleton-class",level:2},{value:"GameManager as Singleton",id:"gamemanager-as-singleton",level:3},{value:"Changing Scene",id:"changing-scene",level:2},{value:"LoadSceneMode",id:"loadscenemode",level:3},{value:"DontDestroyOnLoad Consequences",id:"dontdestroyonload-consequences",level:2},{value:"<code>SceneManager.activeSceneChanged</code>",id:"scenemanageractivescenechanged",level:3},{value:"Controversy",id:"controversy",level:2},{value:"Testing Difficulty",id:"testing-difficulty",level:3},{value:"Object Reference Bug",id:"object-reference-bug",level:3},{value:"Static Class vs Singletons",id:"static-class-vs-singletons",level:2},{value:"Extension",id:"extension",level:4},{value:"Resource Management",id:"resource-management",level:4},{value:"Performance",id:"performance",level:4},{value:"General Usage",id:"general-usage",level:4}];function g(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"the-singleton-pattern",children:"The Singleton Pattern"})}),"\n",(0,a.jsxs)(n.admonition,{title:"Lab Checkoff Requrements",type:"caution",children:[(0,a.jsxs)(n.p,{children:["The lab handout uses Super Mario Bros as assets to demonstrate certain Unity features and functionalities. You are free to follow along and submit it for checkoff, ",(0,a.jsx)(n.strong,{children:"OR you can also create an entirely new project to demonstrate the requested feature(s)"}),"."]}),(0,a.jsxs)(n.p,{children:["The requirement(s) for the lab checkoff can be found ",(0,a.jsx)(n.a,{href:"/50033/docs/children/checkoff",children:"here"}),"."]})]}),"\n",(0,a.jsxs)(n.p,{children:["When we switch from one game scene to another, we will ",(0,a.jsx)("span",{className:"orange-bold",children:"destroy"})," all GameObjects (along with its components) in the previous scene. Sometimes we want some GameObjects to persist, or more specifically: its data or state. We can create a script that implement the Singleton pattern so that the GameObject (along with its children) is ",(0,a.jsx)(n.strong,{children:"not"})," destroyed upon loading to a new Scene. Note that this will only apply on ",(0,a.jsx)("span",{className:"orange-bold",children:"root"})," GameObject. Before we begin, create a new scene and name it ",(0,a.jsx)(n.code,{children:"World 1-2"}),". You don't have to follow exactly ",(0,a.jsx)(n.a,{href:"https://nesmaps.com/maps/SuperMarioBrothers/SuperMarioBrosWorld1-2Map.html",children:"how World 1-2 looks"}),", but here's a sample:"]}),"\n",(0,a.jsx)(o.A,{path:t(92302).A,widthPercentage:"100%"}),"\n",(0,a.jsx)(n.p,{children:"To allow Unity to know which Scenes are involved for run test and build, we need to add them to the Build Setting. Go to File >> Build Setting and add Scenes (drag it to this Build Setting window) that are relevant to your game:"}),"\n",(0,a.jsx)(r.A,{path:"https://50033.s3.ap-southeast-1.amazonaws.com/week-4/build-setting.mp4",widthPercentage:"100%"}),"\n",(0,a.jsx)(n.admonition,{title:"The Singleton Pattern",type:"note",children:(0,a.jsx)(n.p,{children:"The singleton pattern is a way to ensure a class has only a single globally accessible instance available at ALL times. Behaving much like a regular static class but with some advantages. This is very useful for making global manager type classes that hold global variables and functions that many other classes need to access."})}),"\n",(0,a.jsxs)(n.p,{children:["In the ",(0,a.jsx)(n.code,{children:"Awake()"})," function of any script, you can add the following instructions to make it a Singleton:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-cs",children:"// Property\nprivate  static  MonoBehaviour _instance;\n\n// Getter\npublic  static  MonoBehaviour instance\n{\n\tget { return  _instance; }\n}\n\nprivate  void  Awake()\n{\n\t// check if the _instance is not this, means it's been set before, return\n\tif (_instance  !=  null  &&  _instance  !=  this)\n\t{\n\t\tDestroy(this.gameObject);\n\t\treturn;\n\t}\n\n\t// otherwise, this is the first time this instance is created\n\t_instance  =  this;\n\t// add to preserve this object open scene loading\n\tDontDestroyOnLoad(this.gameObject); // only works on root gameObjects\n}\n"})}),"\n",(0,a.jsx)(n.admonition,{type:"caution",children:(0,a.jsxs)(n.p,{children:["Note that if ",(0,a.jsx)(n.code,{children:"this.gameObject"})," is NOT root level GameObject, it will not work. The editor will warn you: ",(0,a.jsx)(n.code,{children:"DontDestroyOnLoad"})," only work for root GameObjects or components on root GameObjects."]})}),"\n",(0,a.jsxs)(n.p,{children:["Adding the above ",(0,a.jsx)(n.em,{children:"static property"})," and Singleton pattern will turn any gameObject to be persistent between screen changing."]}),"\n",(0,a.jsx)(n.h3,{id:"c-static-variable",children:"C#: Static Variable"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"static"})," keyword allows us to gain access to the instance via the ",(0,a.jsx)(n.strong,{children:"Class"})," name, and there will only be one instance that can be linked to this variable Instance at any given time."]}),"\n",(0,a.jsx)(n.h3,{id:"c-properties",children:"C#: Properties"}),"\n",(0,a.jsx)(n.p,{children:"Properties allow access control to a class variable. Writing C# getter and setter properties are very simple, here's a quick example:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-cs",children:"//Member variables can be referred to as fields.\nprivate  int _healthPoints;\n\n//healthPoints is a basic property\npublic  int healthPoints {\n\tget {\n\t\t//Some other code\n\t\t// ...\n\t\treturn _healthPoints;\n\t}\n\tset {\n\t\t// Some other code, check etc\n\t\t// ...\n\t\t_healthPoints = value; // value is the amount passed by the setter\n\t}\n}\n\n// usage\nDebug.Log(player.healthPoints); // this will call instructions under get{}\nplayer.healthPoints += 20; // this will call instructions under set{}, where value is 20\n"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:["Optionally, you can have a ",(0,a.jsx)(n.code,{children:"private"})," setter to disallow other classes from using it."]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"singleton-class",children:"Singleton Class"}),"\n",(0,a.jsx)(n.p,{children:"If you have several gameObjects to stay persistent, you can implement the above instructions on the relevant scripts, but this will result in many boilerplate code. To avoid this, we can create a dedicated script that can be inherited by any other scripts and turning them into Singletons."}),"\n",(0,a.jsx)(n.p,{children:"Create a new script called Singleton.cs, and declare the following properties:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-cs",metastring:'title="Singleton.cs"',children:'using UnityEngine;\n\npublic  class Singleton<T> : MonoBehaviour  where  T : MonoBehaviour\n{\n\tprivate  static  T _instance;\n\tpublic  static  T instance\n\t{\n\t\tget\n\t\t{\n\t\t\treturn  _instance;\n\t\t}\n\t}\n\n\tpublic  virtual  void  Awake ()\n\t{\n\t\tDebug.Log("Singleton Awake called");\n\n\t\tif (_instance  ==  null) {\n\t\t\t_instance  =  this  as T;\n\t\t\tDontDestroyOnLoad (this.gameObject);\n\t\t} else {\n\t\t\tDestroy (gameObject);\n\t\t}\n\t}\n}\n'})}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"virtual"})," method allows override by members inheriting this class, and the member can utilise this base Singleton class as such:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-cs",children:'using UnityEngine;\n\npublic  class Foo : Singleton<Foo>\n{\n\toverride  public  void  Awake(){\n\t\tbase.Awake();\n\t\tDebug.Log("awake called");\n\t\t// other instructions that needs to be done during Awake\n\t}\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"gamemanager-as-singleton",children:"GameManager as Singleton"}),"\n",(0,a.jsxs)(n.p,{children:["We are now ready to convert our ",(0,a.jsx)(n.code,{children:"GameManager"})," into a Singleton as follows:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-cs",metastring:'title="GameManager.cs"',children:"//highlight-start\npublic class GameManager : Singleton<GameManager>\n//highlight-end\n{\n    // other instructions\n}\n"})}),"\n",(0,a.jsxs)(n.p,{children:["This means that the GameManager instance will ",(0,a.jsx)(n.strong,{children:"not be destroyed"})," upon scene change. Feel free to adjust the title of the script to suit your own usage."]}),"\n",(0,a.jsx)(n.h2,{id:"changing-scene",children:"Changing Scene"}),"\n",(0,a.jsxs)(n.p,{children:["Let's test the Singleton Pattern by changing scene from World-1-1 to World-1-2. Prepare the ",(0,a.jsx)(n.code,{children:"castle"})," at the end of World-1-1 to contain an ",(0,a.jsx)(n.strong,{children:"edge collider"}),"."]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Create and set castle's Layer to ",(0,a.jsx)(n.code,{children:"interactive"})]}),"\n",(0,a.jsxs)(n.li,{children:["Set the ",(0,a.jsx)(n.code,{children:"IsTrigger"})," property of EdgeCollider2D"]}),"\n"]}),"\n",(0,a.jsx)(o.A,{path:t(74082).A,widthPercentage:"100%"}),"\n",(0,a.jsxs)(n.p,{children:['To make Mario appear like he\'s "entering" the castle, you can set the ',(0,a.jsx)(n.code,{children:"Sorting Layer"})," of the right side of the castle to be above Mario's sprite (Default):"]}),"\n",(0,a.jsx)(o.A,{path:t(14082).A,widthPercentage:"100%"}),"\n",(0,a.jsxs)(n.p,{children:["Then create new a script called ",(0,a.jsx)(n.code,{children:"NextScene.cs"})," and attach it to the Castle. Set ",(0,a.jsx)(n.code,{children:"nextSceneName"})," as ",(0,a.jsx)(n.code,{children:"World-1-2"})," in the inspector (matching exactly the next scene's name)."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-cs",metastring:'title="NextScene.cs"',children:'\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.SceneManagement;\npublic class NextScene : MonoBehaviour\n{\n    public string nextSceneName;\n    void OnTriggerEnter2D(Collider2D other)\n    {\n        if (other.tag == "Player")\n        {\n            Debug.Log("Change scene!");\n            SceneManager.LoadSceneAsync(nextSceneName, LoadSceneMode.Single);\n        }\n    }\n}\n'})}),"\n",(0,a.jsx)(o.A,{path:t(6598).A,widthPercentage:"100%"}),"\n",(0,a.jsxs)(n.p,{children:["We utilise the function ",(0,a.jsx)(n.code,{children:"LoadSceneAsync"})," from ",(0,a.jsx)(n.code,{children:"UnityEngine.SceneManagement.SceneManager"}),". Please consult its ",(0,a.jsx)(n.a,{href:"https://docs.unity3d.com/ScriptReference/SceneManagement.SceneManager.html",children:"documentation"}),"."]}),"\n",(0,a.jsx)(n.admonition,{title:"Why Async?",type:"caution",children:(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"LoadSceneAsync"})," loads the Scene asynchronously in the background. The name of the Scene to load ",(0,a.jsx)(n.strong,{children:"can be case insensitive"}),". There also exist the synchronous counterpart: ",(0,a.jsx)(n.code,{children:"LoadScene"}),". To avoid pauses or performance hiccups while loading in most cases, you should use ",(0,a.jsx)(n.code,{children:"LoadSceneAsync"}),"."]})}),"\n",(0,a.jsx)(n.h3,{id:"loadscenemode",children:"LoadSceneMode"}),"\n",(0,a.jsxs)(n.p,{children:["There are ",(0,a.jsx)(n.a,{href:"https://docs.unity3d.com/ScriptReference/SceneManagement.LoadSceneMode.html",children:"two modes"})," to load a scene: ",(0,a.jsx)(n.strong,{children:"single"})," and ",(0,a.jsx)(n.strong,{children:"additive"}),"."]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["In ",(0,a.jsx)(n.strong,{children:"single"})," mode, all currently loaded Scene will be closed before loading the new scene. This is suitable when you are moving a player from one region to another."]}),"\n",(0,a.jsxs)(n.li,{children:["In ",(0,a.jsx)(n.strong,{children:"additive mode"}),", we add the scene to currently loaded scene. This is suitable when you want to open fullscreen GUI for players to change gears, skill points, etc."]}),"\n"]}),"\n",(0,a.jsxs)(n.admonition,{type:"playtest",children:[(0,a.jsxs)(n.p,{children:["You should test your project and confirm that Mario can transition between scenes ",(0,a.jsx)(n.strong,{children:"smoothly"}),". Ensure that the castle in World-1-2 does ",(0,a.jsx)("span",{className:"orange-bold",children:"NOT"})," have the ",(0,a.jsx)(n.code,{children:"NextScene"})," script enabled that caused him to perpetually restart World-1-2."]}),(0,a.jsx)(r.A,{path:"https://50033.s3.ap-southeast-1.amazonaws.com/week-4/scene-change.mp4",widthPercentage:"100%"})]}),"\n",(0,a.jsx)(n.h2,{id:"dontdestroyonload-consequences",children:"DontDestroyOnLoad Consequences"}),"\n",(0,a.jsxs)(n.p,{children:["We are not out of the woods yet. The GameManager was made to refer to ",(0,a.jsx)(n.em,{children:"instances"})," in World-1-1 scene as such:"]}),"\n",(0,a.jsx)(o.A,{path:t(17413).A,widthPercentage:"100%"}),"\n",(0,a.jsxs)(n.p,{children:["These instances will be destroyed and ",(0,a.jsx)(n.strong,{children:"new"})," one will be created in World-1-2. This caused GameManager to have missing references:"]}),"\n",(0,a.jsx)(o.A,{path:t(72411).A,widthPercentage:"100%"}),"\n",(0,a.jsx)(n.admonition,{type:"warning",children:(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"Mario"})," in World-1-1 is ",(0,a.jsx)("span",{className:"orange-bold",children:"not"})," the same as ",(0,a.jsx)(n.code,{children:"Mario"})," in World-1-2."]})}),"\n",(0,a.jsx)(n.p,{children:"As a consequence, we need to turn all root GameObjects that refers to World-1-1 GameManager instance into Singletons as well."}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["All scripts on Mario: ",(0,a.jsx)(n.code,{children:"PlayerMovement.cs"})," and ",(0,a.jsx)(n.code,{children:"ActionManager.cs"})," must inherit ",(0,a.jsx)(n.code,{children:"Singleton"})]}),"\n",(0,a.jsxs)(n.li,{children:["All scripts on Canvas: ",(0,a.jsx)(n.code,{children:"HUDManager.cs"})," must also inherit ",(0,a.jsx)(n.code,{children:"Singleton"})]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"scenemanageractivescenechanged",children:(0,a.jsx)(n.code,{children:"SceneManager.activeSceneChanged"})}),"\n",(0,a.jsxs)(n.p,{children:["Since Mario persists, we need to transform Mario back to the beginning position in World-1-2. We need to subscribe to the event ",(0,a.jsx)(n.code,{children:"SceneManager.activeSceneChanged"})," inside ",(0,a.jsx)(n.code,{children:"PlayerMovement.cs"})," to reset Mario's starting position upon new scene being loaded:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-cs",metastring:'title="PlayerMovement.cs"',children:'using UnityEngine.SceneManagement;\n\n    void Start()\n    {\n        // other instructions\n        //highlight-start\n        // subscribe to scene manager scene change\n        SceneManager.activeSceneChanged += SetStartingPosition;\n//highlight-end\n    }\n\n//highlight-start\n    public void SetStartingPosition(Scene current, Scene next)\n    {\n        if (next.name == "World-1-2")\n        {\n            // change the position accordingly in your World-1-2 case\n            this.transform.position = new Vector3(-10.2399998f, -4.3499999f, 0.0f);\n        }\n    }\n    //highlight-end\n\n'})}),"\n",(0,a.jsxs)(n.p,{children:["If you set any object in World-1-2 to refer to ",(0,a.jsx)(n.code,{children:"Mario"})," instance there, e.g as such in Camera:"]}),"\n",(0,a.jsx)(o.A,{path:t(40840).A,widthPercentage:"100%"}),"\n",(0,a.jsxs)(n.p,{children:["Then, you need to modify ",(0,a.jsx)(n.code,{children:"CameraController.cs"})," to reassign current Scene's Mario under ",(0,a.jsx)(n.code,{children:"Start"})," function:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-cs",metastring:'title="CameraController.cs"',children:'    public Transform player; // Mario\'s Transform\n\n    void Start()\n    {\n        // other instructions\n        //highlight-start\n        player = GameObject.FindGameObjectWithTag("Player").transform;\n        //highlight-end\n    }\n'})}),"\n",(0,a.jsxs)(n.admonition,{type:"playtest",children:[(0,a.jsxs)(n.p,{children:["In the end, you want to make sure that the HUD persists (the score), and that there's ",(0,a.jsx)(n.strong,{children:"no missing references"})," in World-1-2 scene:"]}),(0,a.jsx)(r.A,{path:"https://50033.s3.ap-southeast-1.amazonaws.com/week-4/dontdestroyonload.mp4",widthPercentage:"100%"})]}),"\n",(0,a.jsx)(n.h2,{id:"controversy",children:"Controversy"}),"\n",(0,a.jsxs)(n.p,{children:["The Singleton pattern has been somewhat ",(0,a.jsx)(n.a,{href:"https://softwareengineering.stackexchange.com/questions/40373/so-singletons-are-bad-then-what/218322#218322",children:"controversial"}),", although at the end of the day it is up to the developer\u2019s wisdom on whether the pattern should be used. It is prone to abuse, and it is quite difficult to debug, for reasons laid out below."]}),"\n",(0,a.jsx)(n.h3,{id:"testing-difficulty",children:"Testing Difficulty"}),"\n",(0,a.jsx)(n.p,{children:"World-1-2 Scene is made without any GameManager or Canvas (UI) due to the intention that it will be brought over from World-1-1 Scene. However, Mario still exists in case we want to test some basic functionalities:"}),"\n",(0,a.jsx)(o.A,{path:t(4418).A,widthPercentage:"100%"}),"\n",(0,a.jsxs)(n.p,{children:["We can still have GameManager and Canvas in World-1-2 for testing purposes, but that will mean ",(0,a.jsx)(n.em,{children:"double the work"}),". We need to test both ",(0,a.jsx)(n.strong,{children:"cases"}),":"]}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"World-1-2 as standalone scene"}),"\n",(0,a.jsxs)(n.li,{children:["Playing World-1-2 ",(0,a.jsx)(n.em,{children:"from"})," World-1-1"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Nevertheless, testing case 1 does not straightaway imply that case 2 above will be bug free. Each cases must be treated separately. The complexity of testing will grow as we have more and more scenes. To ensure that every scene smoothly transitions to the next, you\u2019d have to start from the first scene, and quickly dash to the end of the first scene to load the second scene to test. It will be quite ridiculous to continue doing this if you have ten separate scenes and more."}),"\n",(0,a.jsx)(n.h3,{id:"object-reference-bug",children:"Object Reference Bug"}),"\n",(0,a.jsxs)(n.p,{children:["We have to be completely certain that any instance referred by the Singleton is ",(0,a.jsx)(n.strong,{children:"not"})," obsolete upon Scene changes. All gameobjects will be ",(0,a.jsx)(n.strong,{children:"destroyed"})," if we load new scene with the option ",(0,a.jsx)(n.code,{children:"LoadSceneMode.Single"})," (unless we use LoadSceneMode.Additive but that will be pretty weird to just simply keep the objects alive if we aren\u2019t using both scenes in parallel). This is why we need to make both PlayerMovement and HUDManager to be Singletons."]}),"\n",(0,a.jsxs)(n.p,{children:["We also need to ensure that any instance in the current scene is referring to the Singleton instance and ",(0,a.jsx)(n.strong,{children:"not"})," the scene instance. This means we can't use the inspector to link up references. For instance, each scene (World-1-1 and World-1-2) has separate instances of ",(0,a.jsx)(n.code,{children:"Camera"})," that refers to ",(0,a.jsx)(n.code,{children:"Mario"}),"'s ",(0,a.jsx)(n.code,{children:"transform"}),". We need to handle reference to the correct (Singleton) Mario under ",(0,a.jsx)(n.code,{children:"Start()"}),". It can be done in these two ways:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-cs",children:'    // using tag (assuming Mario\'s tag is "Player")\n    player = GameObject.FindGameObjectWithTag("Player").transform;\n\n    // referring to the Singleton directly\n    player = PlayerMovementWeek4.instance.gameObject.transform;\n\n'})}),"\n",(0,a.jsx)(n.admonition,{type:"note",children:(0,a.jsxs)(n.p,{children:["The point is that there's ",(0,a.jsx)("span",{className:"orange-bold",children:"no way"})," we can get a reference to World-1-1's singleton Mario in World-1-2 ",(0,a.jsx)(n.em,{children:"before"})," running the game."]})}),"\n",(0,a.jsx)("span",{className:"orange-bold",children:"Use Singleton Pattern with caution!"}),"\n",(0,a.jsx)(n.h2,{id:"static-class-vs-singletons",children:"Static Class vs Singletons"}),"\n",(0,a.jsxs)(n.p,{children:["Static Class and Singletons are similar at first glance: they can only have ",(0,a.jsx)("span",{className:"orange-bold",children:"one"})," instance available in memory, and both can be used to maintain the global state of an application. They come with some subtle differences depending on your application."]}),"\n",(0,a.jsx)(n.p,{children:"This is an example of a static GameManager class:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-cs",children:"using UnityEngine;\nusing UnityEngine.Events;\n\npublic static class StaticGameManager\n{\n    // usage: StaticGameManager.gameStart.AddListener(<FunctionName>)\n    public static UnityEvent gameStart;\n    public static UnityEvent gameRestart;\n    public static UnityEvent<int> scoreChange;\n    public static UnityEvent gameOver;\n    public static UnityEvent damageMario;\n\n    public static IntVariable gameScore;\n\n    // usage: StaticGameManager.GameRestart()\n    public static void GameRestart()\n    {\n        // reset score\n        gameScore.Value = 0;\n        SetScore(gameScore.Value);\n        gameRestart.Invoke();\n        Time.timeScale = 1.0f;\n    }\n\n    public static void IncreaseScore(int increment)\n    {\n        gameScore.ApplyChange(increment);\n        SetScore(gameScore.Value);\n    }\n\n    // invoke the scorechange events\n    public static void SetScore(int score)\n    {\n        scoreChange.Invoke(score);\n    }\n\n    public static void GameOver()\n    {\n        Time.timeScale = 0.0f;\n    }\n\n}\n"})}),"\n",(0,a.jsxs)(n.p,{children:["In a static classes, all members must be static. Static classes provide a way to ",(0,a.jsx)("span",{className:"orange-bold",children:"create"})," and ",(0,a.jsx)("span",{className:"orange-bold",children:"use"})," class and method members ",(0,a.jsx)("span",{className:"orange-bold",children:"without"})," creating an instance of the class. This can be useful when you need to create a ",(0,a.jsx)("span",{className:"orange-bold",children:"utility"})," class with methods that don\u2019t require any ",(0,a.jsx)(n.strong,{children:"state"})," or instance related information. Notice that we do not have instructions like ",(0,a.jsx)(n.code,{children:"this.GetComponent<something>()"})," in the script above."]}),"\n",(0,a.jsx)(n.admonition,{title:"source",type:"note",children:(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://henriquesd.medium.com/singleton-vs-static-class-e6b2b32ec331#:~:text=A%20Singleton%20class%20can%20Dispose,are%20bonded%20on%20compile%20time.",children:"The following information is obtained from here."})})}),"\n",(0,a.jsx)(n.h4,{id:"extension",children:"Extension"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["A Singleton class supports ",(0,a.jsx)("span",{className:"orange-bold",children:"interface"})," implementation, while static classes ",(0,a.jsx)(n.strong,{children:"cannot"})," implement interfaces."]}),"\n",(0,a.jsxs)(n.li,{children:["A Singleton class supports ",(0,a.jsx)("span",{className:"orange-bold",children:"inheritance"}),", while a Static class is a sealed class, and therefore cannot be inherited."]}),"\n",(0,a.jsxs)(n.li,{children:["A Singleton class ",(0,a.jsx)("span",{className:"orange-bold",children:"can inherit from other classes"}),", while a Static class cannot (not even from other static classes)."]}),"\n"]}),"\n",(0,a.jsx)(n.h4,{id:"resource-management",children:"Resource Management"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["A Singleton class can be instantiated using the ",(0,a.jsx)(n.code,{children:"new"})," keyword, while static can not be instantiated (static class can be used directly)."]}),"\n",(0,a.jsxs)(n.li,{children:["Both Singleton and static are stored on the Heap memory, but static classes are stored in a special area of the Heap Memory called the ",(0,a.jsx)("span",{className:"orange-bold",children:"High-Frequency Heap"})," (Objects in High Frequency Heap are not garbage collected by GC, and hence static members are available ",(0,a.jsx)(n.strong,{children:"throughout"})," the application lifetime)."]}),"\n",(0,a.jsxs)(n.li,{children:["A Singleton class can ",(0,a.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/dotnet/standard/garbage-collection/implementing-dispose",children:(0,a.jsx)(n.strong,{children:"Dispose"})})," (release unmanaged resources held by an object explicitly), while a static class can't. Static classes in C# are designed to be ",(0,a.jsx)("span",{className:"orange-bold",children:"stateless"})," and do not have instances that can be disposed of in the same way that regular (non-static) classes do."]}),"\n",(0,a.jsxs)(n.li,{children:["A Static Class is often used for ",(0,a.jsx)("span",{className:"orange-bold",children:"utility functions"})," or as containers for constants, and they don't have a typical object lifecycle like regular instance classes ",(0,a.jsx)(n.em,{children:"or"})," instance-specific state."]}),"\n"]}),"\n",(0,a.jsx)(n.h4,{id:"performance",children:"Performance"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["A Static class has ",(0,a.jsx)("span",{className:"orange-bold",children:"better"})," performance since static methods are bonded on compile time."]}),"\n",(0,a.jsxs)(n.li,{children:["A Singleton class can be ",(0,a.jsx)("span",{className:"orange-bold",children:"lazy loaded"})," when needed, while static classes are always loaded. Static classes are loaded automatically by the .NET Framework common language runtime (CLR) when the program or namespace containing the class is loaded."]}),"\n"]}),"\n",(0,a.jsx)(n.h4,{id:"general-usage",children:"General Usage"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["A Singleton class can have a ",(0,a.jsx)("span",{className:"orange-bold",children:"constructor"}),", while a static class can only have a private static ",(0,a.jsx)("span",{className:"orange-bold",children:"parameterless"})," constructor and cannot have instance constructors."]}),"\n",(0,a.jsxs)(n.li,{children:["A Singleton class can be ",(0,a.jsx)("span",{className:"orange-bold",children:"destroyed"})," (for specific purpose like reset or restart) while Static Classes cannot."]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["Hence, it should be pretty straightforward for you to decide: ",(0,a.jsx)("span",{className:"orange-bold",children:"if a class has no real need to use the Unity API (heavy dependence or computation on the attached object), make it static"}),". If you'd like to dive deeper in making your choices, give ",(0,a.jsx)(n.a,{href:"https://vionixstudio.com/2022/06/18/unity-singleton-and-static-variables/#Singleton_vs_Static_variable_usage_in_Unity",children:"this"}),", ",(0,a.jsx)(n.a,{href:"https://www.c-sharpcorner.com/UploadFile/akkiraju/singleton-vs-static-classes/",children:"this"}),", and ",(0,a.jsx)(n.a,{href:"https://gamedevbeginner.com/singletons-in-unity-the-right-way/",children:"this"})," articles a read on top of your own research. Good luck!"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(g,{...e})}):g(e)}},92302:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/2023-08-20-17-37-39-ce6a91a608f4fb18726c6e499afd9801.png"},74082:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/2023-08-23-16-06-26-4dfdfdb6d49ffd7304c37e68f8abf1c3.png"},14082:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/2023-08-23-16-06-57-e6e1c352d9e043a4d5086b507663cf5d.png"},6598:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/2023-08-23-16-20-39-509973278303de7b20c754bc4b9bde14.png"},17413:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/2023-08-23-17-22-57-869930b14b51dfa607d4d63f0020c356.png"},72411:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/2023-08-23-17-23-38-17e832b8aeac1673a756bb736e1f7997.png"},40840:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/2023-08-23-17-43-35-f92270941a15b70d8bb1fe5dc7c68bf3.png"},4418:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/2023-08-24-10-29-44-d6b8a791e8da67d833a2842d578f3f6d.png"}}]);