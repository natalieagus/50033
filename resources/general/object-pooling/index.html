<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-resources docs-version-current docs-doc-page docs-doc-id-general/object-pooling" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Object Pooling | Game Development and Design</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://natalieagus.github.io/50033/resources/general/object-pooling"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-resources-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-resources-current"><meta data-rh="true" property="og:title" content="Object Pooling | Game Development and Design"><meta data-rh="true" name="description" content="Object pooling is a design pattern (specifically: creational pattern) that you can use to optimize your projects by lowering the burden that is placed on the CPU when having to rapidly instantiate and destroy GameObjects. It is particularly useful for top-down bullethell games, or games that have swarms of monsters that are constantly created and destroyed at runtime."><meta data-rh="true" property="og:description" content="Object pooling is a design pattern (specifically: creational pattern) that you can use to optimize your projects by lowering the burden that is placed on the CPU when having to rapidly instantiate and destroy GameObjects. It is particularly useful for top-down bullethell games, or games that have swarms of monsters that are constantly created and destroyed at runtime."><link data-rh="true" rel="icon" href="/50033/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://natalieagus.github.io/50033/resources/general/object-pooling"><link data-rh="true" rel="alternate" href="https://natalieagus.github.io/50033/resources/general/object-pooling" hreflang="en"><link data-rh="true" rel="alternate" href="https://natalieagus.github.io/50033/resources/general/object-pooling" hreflang="x-default"><script src="https://cdn.jsdelivr.net/npm/brython@3.9.5/brython.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/brython@3.9.5/brython_stdlib.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/50033/assets/css/styles.9cdf0fa5.css">
<script src="/50033/assets/js/runtime~main.335ae3f8.js" defer="defer"></script>
<script src="/50033/assets/js/main.9b58041b.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/50033/img/home-logo.svg"><link rel="preload" as="image" href="/50033/assets/images/2025-10-02-10-51-45-e854637d11f6557a1ef80d8e5a470f27.png"><link rel="preload" as="image" href="/50033/assets/images/2025-10-03-09-19-20-824eafc9d3f834af32411efd4c7bad48.png"><link rel="preload" as="image" href="/50033/assets/images/2025-10-03-15-21-12-6837cd27b3763b68cce8c930501dd653.png"><link rel="preload" as="image" href="/50033/assets/images/2025-10-03-15-28-16-45eab98413f2a3d82550f0950b52675b.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_jvwV"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/50033/"><div class="navbar__logo"><img src="/50033/img/home-logo.svg" alt="DDW Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/50033/img/home-logo.svg" alt="DDW Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">50.033</b></a><a class="navbar__item navbar__link" href="/50033/about/intro">About</a><a class="navbar__item navbar__link" href="/50033/docs/syllabus">Lab Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/50033/resources/category/general-resources">Resources</a></div><div class="navbar__items navbar__items--right"><div class="searchBox_H2mL"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div><a href="https://github.com/natalieagus/50033" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_eExm"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_RSuS"><div class="sidebarViewport_pYEE"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/50033/"><img src="/50033/img/home-logo.svg" alt="DDW Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/50033/img/home-logo.svg" alt="DDW Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"><b>50.033</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/50033/resources/category/general-resources">General Resources</a><button aria-label="Collapse sidebar category &#x27;General Resources&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/50033/resources/general/uidb">The Game UI Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/50033/resources/general/tilemap">Tilemap</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/50033/resources/general/prog-pattern">Game Programming Patterns</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/50033/resources/general/assets-db">Asset Library</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/50033/resources/general/cheats">God Mode for Development</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/50033/resources/general/helper-buttons">Creating Helper Buttons in Inspector</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/50033/resources/general/sprite-resolver">Using Sprite Resolver With Sprite Library</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/50033/resources/general/object-pooling">Object Pooling</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/50033/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/50033/resources/category/general-resources"><span itemprop="name">General Resources</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Object Pooling</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Object Pooling</h1></header>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_vXIg"><p><strong>Object pooling</strong> is a design pattern (specifically: creational pattern) that you can use to optimize your projects by lowering the burden that is placed on the CPU when having to rapidly <strong>instantiate</strong> and <strong>destroy</strong> GameObjects. It is particularly useful for top-down bullethell games, or games that have swarms of monsters that are constantly created and destroyed at runtime.</p></div></div>
<p>Without pooling, frequent instantiation and garbage collection can cause frame rate drops and stuttering. By keeping a pool of inactive objects ready to be activated and recycled, games reduce CPU and memory overhead, achieve smoother performance on both high-end and mobile devices, and maintain more predictable behavior during action-heavy moments.</p>
<p>The main idea of Object Pooling is as follows:</p>
<ul>
<li>Instantiate <code>N</code> objects at <code>Awake()</code>, but render them <strong>inactive</strong>. Place all of them in a <em>pool</em>.</li>
<li>Activate each objects at runtime accordingly, instead of instantiating new ones. This action removes <em>available</em> objects from the <em>pool</em>.</li>
<li>After we are done with these objects, <span class="orange-bold">deactivate</span> them. This essentially returns the object back to the <em>pool</em>, ready to be reused next time.</li>
<li>The <em>pool</em> may run out of objects to be activated eventually, and we can optionally <em>expand</em> the pool at runtime. This requires instantiation of new gameObjects obviously, so try to reduce the need to do so and instantiate enough relevant game objects at <code>Awake()</code>.</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="the-object-pooler">The Object Pooler<a href="#the-object-pooler" class="hash-link" aria-label="Direct link to The Object Pooler" title="Direct link to The Object Pooler">​</a></h2>
<p>The Object Pooler script is going to be attached to an empty gameobject in the Scene, and it is typically made persistent (a Singleton).</p>
<p>It utilises three classes:</p>
<ul>
<li><code>ObjectPoolItem</code>: A class to define the data structure of an Object metadata to be spawned into the pool</li>
<li><code>ExistingPoolItem</code>: A class to define the data structure of an Object <em>in</em> the pool</li>
<li><code>ObjectType</code>: A SO class that serves as a concrete representation of a type of an object (as opposed to using enums or strings)</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="objecttype">ObjectType<a href="#objecttype" class="hash-link" aria-label="Direct link to ObjectType" title="Direct link to ObjectType">​</a></h3>
<div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#2a2734;--prism-color:#9a86fd"><div class="codeBlockTitle_Ktv7">ObjectType.cs</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar" style="background-color:#2a2734;color:#9a86fd"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9a86fd"><span class="token keyword" style="color:#ffcc99">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token punctuation" style="color:#6c6783">[</span><span class="token attribute class-name">CreateAssetMenu</span><span class="token attribute attribute-arguments punctuation" style="color:#6c6783">(</span><span class="token attribute attribute-arguments">menuName </span><span class="token attribute attribute-arguments operator" style="color:#e09142">=</span><span class="token attribute attribute-arguments"> </span><span class="token attribute attribute-arguments string" style="color:#ffcc99">&quot;Object Pool/Object Type&quot;</span><span class="token attribute attribute-arguments punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">class</span><span class="token plain"> </span><span class="token class-name">ObjectType</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token type-list class-name">ScriptableObject</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>With this, you can right click in the Project window &gt;&gt; Object Pool &gt;&gt; Object Type to create any type you want as shown below:</p>
<section><img src="/50033/assets/images/2025-10-02-10-51-45-e854637d11f6557a1ef80d8e5a470f27.png" class="center_image_tcFY" style="width:100%"></section>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="objectpoolitem">ObjectPoolItem<a href="#objectpoolitem" class="hash-link" aria-label="Direct link to ObjectPoolItem" title="Direct link to ObjectPoolItem">​</a></h3>
<div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#2a2734;--prism-color:#9a86fd"><div class="codeBlockTitle_Ktv7">ObjectPoolItem.cs</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar" style="background-color:#2a2734;color:#9a86fd"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9a86fd"><span class="token punctuation" style="color:#6c6783">[</span><span class="token attribute class-name">System</span><span class="token attribute class-name punctuation" style="color:#6c6783">.</span><span class="token attribute class-name">Serializable</span><span class="token punctuation" style="color:#6c6783">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">class</span><span class="token plain"> </span><span class="token class-name">ObjectPoolItem</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token class-name keyword" style="color:#ffcc99">int</span><span class="token plain"> amount</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token class-name">GameObject</span><span class="token plain"> prefab</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token class-name keyword" style="color:#ffcc99">bool</span><span class="token plain"> expandPool</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token class-name">ObjectType</span><span class="token plain"> type</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain">   </span><span class="token comment" style="color:#6c6783">// ScriptableObject reference</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token punctuation" style="color:#6c6783">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This class will be used later on by the <code>ObjectPooler</code> script to define the objects to instantiate in the pool. We can conventiently define in the inspector the characteristics of the objects to be spawned.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="existingpoolitem">ExistingPoolItem<a href="#existingpoolitem" class="hash-link" aria-label="Direct link to ExistingPoolItem" title="Direct link to ExistingPoolItem">​</a></h3>
<div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#2a2734;--prism-color:#9a86fd"><div class="codeBlockTitle_Ktv7">ExistingPoolItem.cs</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar" style="background-color:#2a2734;color:#9a86fd"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">class</span><span class="token plain"> </span><span class="token class-name">ExistingPoolItem</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token class-name">GameObject</span><span class="token plain"> gameObject</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token class-name">ObjectType</span><span class="token plain"> type</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">private</span><span class="token plain"> </span><span class="token class-name">Vector3</span><span class="token plain"> defaultScale</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">private</span><span class="token plain"> </span><span class="token class-name">Quaternion</span><span class="token plain"> defaultRotation</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">ExistingPoolItem</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token class-name">GameObject</span><span class="token plain"> gameObject</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token class-name">ObjectType</span><span class="token plain"> type</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">this</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">gameObject </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> gameObject</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">this</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">type </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> type</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        defaultScale </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> gameObject</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">localScale</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        defaultRotation </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> gameObject</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">localRotation</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">ResetState</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token comment" style="color:#6c6783">// Reset transform</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        gameObject</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">localScale </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> defaultScale</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        gameObject</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">localRotation </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> defaultRotation</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token comment" style="color:#6c6783">// Re-enable all behaviours</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">foreach</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token class-name keyword" style="color:#ffcc99">var</span><span class="token plain"> comp </span><span class="token keyword" style="color:#ffcc99">in</span><span class="token plain"> gameObject</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token generic-method function" style="color:#9a86fd">GetComponentsInChildren</span><span class="token generic-method generic class-name punctuation" style="color:#6c6783">&lt;</span><span class="token generic-method generic class-name">Behaviour</span><span class="token generic-method generic class-name punctuation" style="color:#6c6783">&gt;</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token boolean" style="color:#ffcc99">true</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            comp</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">enabled </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ffcc99">true</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token comment" style="color:#6c6783">// Reset rigidbodies</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">foreach</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token class-name keyword" style="color:#ffcc99">var</span><span class="token plain"> rb </span><span class="token keyword" style="color:#ffcc99">in</span><span class="token plain"> gameObject</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token generic-method function" style="color:#9a86fd">GetComponentsInChildren</span><span class="token generic-method generic class-name punctuation" style="color:#6c6783">&lt;</span><span class="token generic-method generic class-name">Rigidbody2D</span><span class="token generic-method generic class-name punctuation" style="color:#6c6783">&gt;</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            rb</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">linearVelocity </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> Vector2</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">zero</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            rb</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">angularVelocity </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token number" style="color:#e09142">0f</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">foreach</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token class-name keyword" style="color:#ffcc99">var</span><span class="token plain"> rb </span><span class="token keyword" style="color:#ffcc99">in</span><span class="token plain"> gameObject</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token generic-method function" style="color:#9a86fd">GetComponentsInChildren</span><span class="token generic-method generic class-name punctuation" style="color:#6c6783">&lt;</span><span class="token generic-method generic class-name">Rigidbody</span><span class="token generic-method generic class-name punctuation" style="color:#6c6783">&gt;</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            rb</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">linearVelocity </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> Vector3</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">zero</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            rb</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">angularVelocity </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> Vector3</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">zero</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token comment" style="color:#6c6783">// Script hook</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">foreach</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token class-name keyword" style="color:#ffcc99">var</span><span class="token plain"> poolable </span><span class="token keyword" style="color:#ffcc99">in</span><span class="token plain"> gameObject</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token generic-method function" style="color:#9a86fd">GetComponentsInChildren</span><span class="token generic-method generic class-name punctuation" style="color:#6c6783">&lt;</span><span class="token generic-method generic class-name">IPoolable</span><span class="token generic-method generic class-name punctuation" style="color:#6c6783">&gt;</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            poolable</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">OnReused</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token punctuation" style="color:#6c6783">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This is the data structure to describe <em>each</em> instantiated object in the pool. The <code>ObjectPooler</code> script will go through a list of <code>ObjectPoolItem</code> and then instantiate the appropriate GameObject based on the defined prefab and quantity, then instantiate new <code>ExistingPoolItem</code> with that detail.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="objectpooler">ObjectPooler<a href="#objectpooler" class="hash-link" aria-label="Direct link to ObjectPooler" title="Direct link to ObjectPooler">​</a></h3>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">ObjectPooler.cs</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Singleton.cs</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#2a2734;--prism-color:#9a86fd"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar" style="background-color:#2a2734;color:#9a86fd"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9a86fd"><span class="token keyword" style="color:#ffcc99">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token namespace punctuation" style="opacity:0.7;color:#6c6783">.</span><span class="token namespace" style="opacity:0.7">Collections</span><span class="token namespace punctuation" style="opacity:0.7;color:#6c6783">.</span><span class="token namespace" style="opacity:0.7">Generic</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token keyword" style="color:#ffcc99">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token keyword" style="color:#ffcc99">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token namespace punctuation" style="opacity:0.7;color:#6c6783">.</span><span class="token namespace" style="opacity:0.7">SceneManagement</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">class</span><span class="token plain"> </span><span class="token class-name">ObjectPooler</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token type-list class-name">Singleton</span><span class="token type-list class-name punctuation" style="color:#6c6783">&lt;</span><span class="token type-list class-name">ObjectPooler</span><span class="token type-list class-name punctuation" style="color:#6c6783">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token class-name">List</span><span class="token class-name punctuation" style="color:#6c6783">&lt;</span><span class="token class-name">ObjectPoolItem</span><span class="token class-name punctuation" style="color:#6c6783">&gt;</span><span class="token plain"> itemsToPool</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain">      </span><span class="token comment" style="color:#6c6783">// types of different objects to pool</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token class-name">List</span><span class="token class-name punctuation" style="color:#6c6783">&lt;</span><span class="token class-name">ExistingPoolItem</span><span class="token class-name punctuation" style="color:#6c6783">&gt;</span><span class="token plain"> pooledObjects</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain">  </span><span class="token comment" style="color:#6c6783">// list of all pooled objects</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">private</span><span class="token plain"> </span><span class="token class-name">Transform</span><span class="token plain"> sceneContainer</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">override</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">Awake</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">base</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">Awake</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        SceneManager</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">sceneLoaded </span><span class="token operator" style="color:#e09142">+=</span><span class="token plain"> OnSceneLoaded</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"> </span><span class="token comment" style="color:#6c6783">// SceneManager.sceneLoaded always fires when a scene is loaded, including the very first scene of the game</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">OnSceneLoaded</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token class-name">Scene</span><span class="token plain"> scene</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token class-name">LoadSceneMode</span><span class="token plain"> mode</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token function" style="color:#9a86fd">InitializePools</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"> </span><span class="token comment" style="color:#6c6783">// re-run init logic for the new scene</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">InitializePool</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        Debug</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">Log</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;[Pooler] Initializing pool&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token function" style="color:#9a86fd">CreateSceneContainer</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        pooledObjects </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">List</span><span class="token constructor-invocation class-name punctuation" style="color:#6c6783">&lt;</span><span class="token constructor-invocation class-name">ExistingPoolItem</span><span class="token constructor-invocation class-name punctuation" style="color:#6c6783">&gt;</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">foreach</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token class-name">ObjectPoolItem</span><span class="token plain"> item </span><span class="token keyword" style="color:#ffcc99">in</span><span class="token plain"> itemsToPool</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token keyword" style="color:#ffcc99">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token class-name keyword" style="color:#ffcc99">int</span><span class="token plain"> i </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token number" style="color:#e09142">0</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"> i </span><span class="token operator" style="color:#e09142">&lt;</span><span class="token plain"> item</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">amount</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"> i</span><span class="token operator" style="color:#e09142">++</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">                </span><span class="token class-name">GameObject</span><span class="token plain"> pickup </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">Instantiate</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">item</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">prefab</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> sceneContainer</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">                pickup</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">SetActive</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token boolean" style="color:#ffcc99">false</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">                </span><span class="token class-name keyword" style="color:#ffcc99">var</span><span class="token plain"> e </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">ExistingPoolItem</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">pickup</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> item</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">type</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">                pooledObjects</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">Add</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">                Debug</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">Log</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token interpolation-string string" style="color:#ffcc99">$&quot;[Pooler] Added </span><span class="token interpolation-string interpolation punctuation" style="color:#6c6783">{</span><span class="token interpolation-string interpolation expression language-csharp">pickup</span><span class="token interpolation-string interpolation expression language-csharp punctuation" style="color:#6c6783">.</span><span class="token interpolation-string interpolation expression language-csharp">name</span><span class="token interpolation-string interpolation punctuation" style="color:#6c6783">}</span><span class="token interpolation-string string" style="color:#ffcc99"> of type </span><span class="token interpolation-string interpolation punctuation" style="color:#6c6783">{</span><span class="token interpolation-string interpolation expression language-csharp">item</span><span class="token interpolation-string interpolation expression language-csharp punctuation" style="color:#6c6783">.</span><span class="token interpolation-string interpolation expression language-csharp">type</span><span class="token interpolation-string interpolation expression language-csharp punctuation" style="color:#6c6783">.</span><span class="token interpolation-string interpolation expression language-csharp">name</span><span class="token interpolation-string interpolation punctuation" style="color:#6c6783">}</span><span class="token interpolation-string string" style="color:#ffcc99">&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">CreateSceneContainer</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token class-name">GameObject</span><span class="token plain"> container </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">GameObject</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;PoolContainer&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        sceneContainer </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> container</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">private</span><span class="token plain"> </span><span class="token return-type class-name">GameObject</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">GetPooledObject</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token class-name">ObjectType</span><span class="token plain"> type</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token comment" style="color:#6c6783">// 1. Try to find an inactive object to reuse</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token class-name keyword" style="color:#ffcc99">int</span><span class="token plain"> i </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token number" style="color:#e09142">0</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"> i </span><span class="token operator" style="color:#e09142">&lt;</span><span class="token plain"> pooledObjects</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">Count</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"> i</span><span class="token operator" style="color:#e09142">++</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token class-name keyword" style="color:#ffcc99">var</span><span class="token plain"> pooled </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> pooledObjects</span><span class="token punctuation" style="color:#6c6783">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#6c6783">]</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token keyword" style="color:#ffcc99">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token operator" style="color:#e09142">!</span><span class="token plain">pooled</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">gameObject</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">activeInHierarchy </span><span class="token operator" style="color:#e09142">&amp;&amp;</span><span class="token plain"> pooled</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">type </span><span class="token operator" style="color:#e09142">==</span><span class="token plain"> type</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">                Debug</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">Log</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token interpolation-string string" style="color:#ffcc99">$&quot;[Pooler] Reusing pooled object of type </span><span class="token interpolation-string interpolation punctuation" style="color:#6c6783">{</span><span class="token interpolation-string interpolation expression language-csharp">type</span><span class="token interpolation-string interpolation expression language-csharp punctuation" style="color:#6c6783">.</span><span class="token interpolation-string interpolation expression language-csharp">name</span><span class="token interpolation-string interpolation punctuation" style="color:#6c6783">}</span><span class="token interpolation-string string" style="color:#ffcc99">&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">                pooled</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">ResetState</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"> </span><span class="token comment" style="color:#6c6783">//  reset when reused</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">                </span><span class="token keyword" style="color:#ffcc99">return</span><span class="token plain"> pooled</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">gameObject</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token comment" style="color:#6c6783">// 2. If none available, expand pool if allowed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">foreach</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token class-name">ObjectPoolItem</span><span class="token plain"> item </span><span class="token keyword" style="color:#ffcc99">in</span><span class="token plain"> itemsToPool</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token keyword" style="color:#ffcc99">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">item</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">type </span><span class="token operator" style="color:#e09142">==</span><span class="token plain"> type </span><span class="token operator" style="color:#e09142">&amp;&amp;</span><span class="token plain"> item</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">expandPool</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">                </span><span class="token class-name">GameObject</span><span class="token plain"> pickup </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">Instantiate</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">item</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">prefab</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">                pickup</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">SetActive</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token boolean" style="color:#ffcc99">false</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">                pickup</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">parent </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">this</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">                </span><span class="token class-name keyword" style="color:#ffcc99">var</span><span class="token plain"> newItem </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">ExistingPoolItem</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">pickup</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> item</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">type</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">                pooledObjects</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">Add</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">newItem</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">                Debug</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">Log</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token interpolation-string string" style="color:#ffcc99">$&quot;[Pooler] Expanded pool for type </span><span class="token interpolation-string interpolation punctuation" style="color:#6c6783">{</span><span class="token interpolation-string interpolation expression language-csharp">type</span><span class="token interpolation-string interpolation expression language-csharp punctuation" style="color:#6c6783">.</span><span class="token interpolation-string interpolation expression language-csharp">name</span><span class="token interpolation-string interpolation punctuation" style="color:#6c6783">}</span><span class="token interpolation-string string" style="color:#ffcc99">&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">                newItem</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">ResetState</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"> </span><span class="token comment" style="color:#6c6783">//  also reset when newly created</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">                </span><span class="token keyword" style="color:#ffcc99">return</span><span class="token plain"> pickup</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token comment" style="color:#6c6783">// 3. Nothing found or expandable</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        Debug</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">LogWarning</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token interpolation-string string" style="color:#ffcc99">$&quot;[Pooler] No pooled object available for type </span><span class="token interpolation-string interpolation punctuation" style="color:#6c6783">{</span><span class="token interpolation-string interpolation expression language-csharp">type</span><span class="token interpolation-string interpolation expression language-csharp punctuation" style="color:#6c6783">.</span><span class="token interpolation-string interpolation expression language-csharp">name</span><span class="token interpolation-string interpolation punctuation" style="color:#6c6783">}</span><span class="token interpolation-string string" style="color:#ffcc99">&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">return</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">null</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">SpawnFromPooler</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token class-name">ObjectType</span><span class="token plain"> type</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token class-name">Vector3</span><span class="token plain"> position</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token class-name">GameObject</span><span class="token plain"> item </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">GetPooledObject</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">type</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">item </span><span class="token operator" style="color:#e09142">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">null</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token comment" style="color:#6c6783">// example random spawn</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            item</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">position </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> position</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            item</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">SetActive</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token boolean" style="color:#ffcc99">true</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            Debug</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">Log</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token interpolation-string string" style="color:#ffcc99">$&quot;[Pooler] Spawned object of type </span><span class="token interpolation-string interpolation punctuation" style="color:#6c6783">{</span><span class="token interpolation-string interpolation expression language-csharp">type</span><span class="token interpolation-string interpolation expression language-csharp punctuation" style="color:#6c6783">.</span><span class="token interpolation-string interpolation expression language-csharp">name</span><span class="token interpolation-string interpolation punctuation" style="color:#6c6783">}</span><span class="token interpolation-string string" style="color:#ffcc99"> at </span><span class="token interpolation-string interpolation punctuation" style="color:#6c6783">{</span><span class="token interpolation-string interpolation expression language-csharp">item</span><span class="token interpolation-string interpolation expression language-csharp punctuation" style="color:#6c6783">.</span><span class="token interpolation-string interpolation expression language-csharp">transform</span><span class="token interpolation-string interpolation expression language-csharp punctuation" style="color:#6c6783">.</span><span class="token interpolation-string interpolation expression language-csharp">position</span><span class="token interpolation-string interpolation punctuation" style="color:#6c6783">}</span><span class="token interpolation-string string" style="color:#ffcc99">&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            Debug</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">LogWarning</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token interpolation-string string" style="color:#ffcc99">$&quot;[Pooler] Not enough items in the pool for type </span><span class="token interpolation-string interpolation punctuation" style="color:#6c6783">{</span><span class="token interpolation-string interpolation expression language-csharp">type</span><span class="token interpolation-string interpolation expression language-csharp punctuation" style="color:#6c6783">.</span><span class="token interpolation-string interpolation expression language-csharp">name</span><span class="token interpolation-string interpolation punctuation" style="color:#6c6783">}</span><span class="token interpolation-string string" style="color:#ffcc99">&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#2a2734;--prism-color:#9a86fd"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar" style="background-color:#2a2734;color:#9a86fd"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9a86fd"><span class="token keyword" style="color:#ffcc99">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">class</span><span class="token plain"> </span><span class="token class-name">Singleton</span><span class="token class-name punctuation" style="color:#6c6783">&lt;</span><span class="token class-name">T</span><span class="token class-name punctuation" style="color:#6c6783">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">where</span><span class="token plain"> </span><span class="token class-name">T</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">private</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">static</span><span class="token plain"> </span><span class="token class-name">T</span><span class="token plain"> _instance</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">static</span><span class="token plain"> </span><span class="token return-type class-name">T</span><span class="token plain"> instance</span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">get</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token keyword" style="color:#ffcc99">return</span><span class="token plain"> _instance</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">virtual</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">Awake</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">_instance </span><span class="token operator" style="color:#e09142">==</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">null</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            _instance </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">this</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">as</span><span class="token plain"> </span><span class="token class-name">T</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token function" style="color:#9a86fd">DontDestroyOnLoad</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token keyword" style="color:#ffcc99">this</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">gameObject</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token function" style="color:#9a86fd">Destroy</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">gameObject</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token punctuation" style="color:#6c6783">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div>
<p>The <code>ObjectPooler</code> inherits the <code>Singleton</code> class, so that only one instance is created once the scene loads for as long as the Application is running.</p>
<div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_vXIg"><p>Common practice in most games:</p><ul>
<li>Keep a persistent global singleton pooler</li>
<li>Subscribe to <code>SceneManager.sceneLoaded</code> and rebuild/extend pools if scene-specific prefabs are needed</li>
<li>Pooled objects themselves don’t need to know about scenes (not made singleton)</li>
</ul></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="itemstopool">ItemsToPool<a href="#itemstopool" class="hash-link" aria-label="Direct link to ItemsToPool" title="Direct link to ItemsToPool">​</a></h4>
<p>This list will be exposed to the inspector and we can define what objects we want the pooler the spawn, the prefabs, and the quantity, as well as its type.</p>
<section><img src="/50033/assets/images/2025-10-03-09-19-20-824eafc9d3f834af32411efd4c7bad48.png" class="center_image_tcFY" style="width:40%"></section>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="awake--initialize-pool">Awake &amp; Initialize Pool<a href="#awake--initialize-pool" class="hash-link" aria-label="Direct link to Awake &amp; Initialize Pool" title="Direct link to Awake &amp; Initialize Pool">​</a></h4>
<p>In <code>Awake</code>. we immediately subscribed to <code>OnSceneLoaded</code> method which call <code>InitializePool</code>. This ensures that the pool is re-created when new scene is loaded, given that this instance is a Singleton.</p>
<p>In the <code>InitializePool</code> method, we create a SceneContainer, which is a new GameObject in the scene which will be the parent object of all spawned objects in the pool as dictated by <code>itemsToPool</code>. We cannot make it the child of <code>this</code> instance as it will make all the child objects persists under <code>DontDestroyOnLoad</code>.</p>
<ul>
<li>Pooler singleton is marked <code>DontDestroyOnLoad</code>, so the manager survives across scenes</li>
<li>The pooled object will be assigned as the children of <code>SceneContainer</code> so it doesn&#x27;t survive across scenes because typically we have different things to spawn then (we can change <code>itemsToPool</code> in the ObjectPooler while prepping for scene change so it will initialize different things then)</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="getpooledobject">GetPooledObject<a href="#getpooledobject" class="hash-link" aria-label="Direct link to GetPooledObject" title="Direct link to GetPooledObject">​</a></h4>
<p>This private method tries to find an inactive object to reuse. If one exists, then it will call <code>ResetState</code> method:</p>
<ul>
<li>Defined in <code>ExistingPoolItem</code></li>
<li>Does standard hardcoded behavior: reset transform scale and rotation, re-enable all components, reset rigidbodies</li>
<li>Calls <code>OnReused()</code> method implemented by <a href="#IPoolable"><code>IPoolable</code></a></li>
</ul>
<div class="theme-admonition theme-admonition-caution alert alert--warning admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_vXIg"><p>It is important to reset the states of a pooled object before spawning them, except its transform location.</p></div></div>
<p>If we run out of pool object and if <code>expandPool</code> flag for that type is ticked, then the ObjectPooler will create new instances of that object during runtime.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="spawnfrompooler">SpawnFromPooler<a href="#spawnfrompooler" class="hash-link" aria-label="Direct link to SpawnFromPooler" title="Direct link to SpawnFromPooler">​</a></h3>
<p>This is a public method that can be directly called by other script to spawn (activate) available object from the pooler. It requires the type of object (SO reference created earlier) and the location of spawning.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ipoolable">IPoolable<a href="#ipoolable" class="hash-link" aria-label="Direct link to IPoolable" title="Direct link to IPoolable">​</a></h3>
<p>Sometimes we have custom setting that we need to do to the object in the pool before we spawn them. We can do this in any script <span class="orange-bold">attached to the pooled object prefab</span>, as long as it implements IPoolable:</p>
<div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#2a2734;--prism-color:#9a86fd"><div class="codeBlockTitle_Ktv7">IPoolable.cs</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar" style="background-color:#2a2734;color:#9a86fd"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">interface</span><span class="token plain"> </span><span class="token class-name">IPoolable</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">OnReused</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain">         </span><span class="token comment" style="color:#6c6783">// optional: called when pulled from pool</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>ExistingPoolItem</code> always calls <code>OnReused</code> in its <code>ResetState</code> to apply these additional logic.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="returning-object-to-the-pool">Returning Object to the pool<a href="#returning-object-to-the-pool" class="hash-link" aria-label="Direct link to Returning Object to the pool" title="Direct link to Returning Object to the pool">​</a></h3>
<p>There&#x27;s <span class="orange-bold">no</span> method to &quot;return&quot; the object to the pool. We simply <em>deactivate</em> the object using the following to effectively tell the <code>ObjectPooler</code> that this item is available to be reused:</p>
<div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#2a2734;--prism-color:#9a86fd"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar" style="background-color:#2a2734;color:#9a86fd"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9a86fd"><span class="token plain">    gameObject</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">SetActive</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token boolean" style="color:#ffcc99">false</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="demo">Demo<a href="#demo" class="hash-link" aria-label="Direct link to Demo" title="Direct link to Demo">​</a></h2>
<p>Attach the ObjectPooler script to a gameobject, and set up the initial values like so:</p>
<section><img src="/50033/assets/images/2025-10-03-15-21-12-6837cd27b3763b68cce8c930501dd653.png" class="center_image_tcFY" style="width:100%"></section>
<p>To test, we can create an object spawner script as such:</p>
<div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_vXIg"><p>It relies on custom InspectorButton attribute so that we can conveniently call the function via a button on the inspector. Read this <a href="https://natalieagus.github.io/50033/resources/general/helper-buttons#generic-debut-button-generator-editor-script" target="_blank" rel="noopener noreferrer">guide</a> to find out more.</p></div></div>
<div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#2a2734;--prism-color:#9a86fd"><div class="codeBlockTitle_Ktv7">ObjectSpawner.cs</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar" style="background-color:#2a2734;color:#9a86fd"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9a86fd"><span class="token keyword" style="color:#ffcc99">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token namespace punctuation" style="opacity:0.7;color:#6c6783">.</span><span class="token namespace" style="opacity:0.7">Collections</span><span class="token namespace punctuation" style="opacity:0.7;color:#6c6783">.</span><span class="token namespace" style="opacity:0.7">Generic</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token keyword" style="color:#ffcc99">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token keyword" style="color:#ffcc99">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">Game</span><span class="token namespace punctuation" style="opacity:0.7;color:#6c6783">.</span><span class="token namespace" style="opacity:0.7">DebugTools</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token comment" style="color:#6c6783">// Spawner: decides what to spawn and where. It should never care about internal prefab state.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">class</span><span class="token plain"> </span><span class="token class-name">ObjectSpawner</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token class-name">Camera</span><span class="token plain"> cam</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain">                  </span><span class="token comment" style="color:#6c6783">// assign main camera in Inspector (or get in Awake)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">[</span><span class="token function" style="color:#9a86fd">Header</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;Put all kinds of types to spawn automatically when Space key is pressed&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token class-name">List</span><span class="token class-name punctuation" style="color:#6c6783">&lt;</span><span class="token class-name">ObjectType</span><span class="token class-name punctuation" style="color:#6c6783">&gt;</span><span class="token plain"> spawnTypes</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"> </span><span class="token comment" style="color:#6c6783">// drag Enemy.asset, Bullet.asset, etc. here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">[</span><span class="token function" style="color:#9a86fd">Header</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;Pick the type you want to spawn in the Inspector&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token class-name">ObjectType</span><span class="token plain"> typeToSpawn</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain">  </span><span class="token comment" style="color:#6c6783">// drag Enemy.asset, Bullet.asset, etc.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">Awake</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">cam </span><span class="token operator" style="color:#e09142">==</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">null</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"> cam </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> Camera</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">main</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">Update</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">Input</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">GetKeyDown</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">KeyCode</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">Space</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token comment" style="color:#6c6783">// 1. Pick a random type</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token class-name">ObjectType</span><span class="token plain"> randomType </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> spawnTypes</span><span class="token punctuation" style="color:#6c6783">[</span><span class="token plain">Random</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">Range</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token number" style="color:#e09142">0</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> spawnTypes</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">Count</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">]</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token comment" style="color:#6c6783">// 2. Pick a random position inside camera bounds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token class-name">Vector3</span><span class="token plain"> pos </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">GetRandomScreenPosition</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token comment" style="color:#6c6783">// 3. Spawn using ObjectPooler</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            ObjectPooler</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">instance</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">SpawnFromPooler</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">randomType</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> pos</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">private</span><span class="token plain"> </span><span class="token return-type class-name">Vector3</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">GetRandomScreenPosition</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token class-name keyword" style="color:#ffcc99">float</span><span class="token plain"> height </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> cam</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">orthographicSize </span><span class="token operator" style="color:#e09142">*</span><span class="token plain"> </span><span class="token number" style="color:#e09142">2f</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token class-name keyword" style="color:#ffcc99">float</span><span class="token plain"> width </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> height </span><span class="token operator" style="color:#e09142">*</span><span class="token plain"> cam</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">aspect</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token class-name keyword" style="color:#ffcc99">float</span><span class="token plain"> x </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> Random</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">Range</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token operator" style="color:#e09142">-</span><span class="token plain">width </span><span class="token operator" style="color:#e09142">/</span><span class="token plain"> </span><span class="token number" style="color:#e09142">2f</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> width </span><span class="token operator" style="color:#e09142">/</span><span class="token plain"> </span><span class="token number" style="color:#e09142">2f</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token class-name keyword" style="color:#ffcc99">float</span><span class="token plain"> y </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> Random</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">Range</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token operator" style="color:#e09142">-</span><span class="token plain">height </span><span class="token operator" style="color:#e09142">/</span><span class="token plain"> </span><span class="token number" style="color:#e09142">2f</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> height </span><span class="token operator" style="color:#e09142">/</span><span class="token plain"> </span><span class="token number" style="color:#e09142">2f</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">return</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token number" style="color:#e09142">0f</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">[</span><span class="token attribute class-name">InspectorButton</span><span class="token punctuation" style="color:#6c6783">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">SpawnFromInspectorType</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token class-name">Vector3</span><span class="token plain"> pos </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">GetRandomScreenPosition</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        ObjectPooler</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">instance</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">SpawnFromPooler</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">typeToSpawn</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> pos</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then simply attach it to any gameobject:</p>
<section><img src="/50033/assets/images/2025-10-03-15-28-16-45eab98413f2a3d82550f0950b52675b.png" class="center_image_tcFY" style="width:100%"></section>
<p>We wrote a simple floating behavior of the objects in the pool when spawned, where it implements the <code>IPoolable</code> interface. This way we can write our object-specific logic before it&#x27;s reactivated from the pool:</p>
<div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#2a2734;--prism-color:#9a86fd"><div class="codeBlockTitle_Ktv7">FloatingEffect.cs</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar" style="background-color:#2a2734;color:#9a86fd"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9a86fd"><span class="token keyword" style="color:#ffcc99">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">class</span><span class="token plain"> </span><span class="token class-name">FloatingEffect</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token type-list punctuation" style="color:#6c6783">,</span><span class="token type-list"> </span><span class="token type-list class-name">IPoolable</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">[</span><span class="token attribute class-name">Header</span><span class="token attribute attribute-arguments punctuation" style="color:#6c6783">(</span><span class="token attribute attribute-arguments string" style="color:#ffcc99">&quot;Floating Settings&quot;</span><span class="token attribute attribute-arguments punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token class-name keyword" style="color:#ffcc99">float</span><span class="token plain"> floatAmplitude </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token number" style="color:#e09142">0.5f</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain">   </span><span class="token comment" style="color:#6c6783">// vertical float height</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token class-name keyword" style="color:#ffcc99">float</span><span class="token plain"> floatFrequency </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token number" style="color:#e09142">1f</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain">     </span><span class="token comment" style="color:#6c6783">// vertical float speed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">[</span><span class="token function" style="color:#9a86fd">Header</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;Drift Settings&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token class-name keyword" style="color:#ffcc99">float</span><span class="token plain"> driftRadius </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token number" style="color:#e09142">0.5f</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain">      </span><span class="token comment" style="color:#6c6783">// horizontal drift distance</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token class-name keyword" style="color:#ffcc99">float</span><span class="token plain"> driftSpeed </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token number" style="color:#e09142">0.5f</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain">       </span><span class="token comment" style="color:#6c6783">// drift speed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">[</span><span class="token function" style="color:#9a86fd">Header</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;Lifetime Settings&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token class-name keyword" style="color:#ffcc99">float</span><span class="token plain"> lifetime </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token number" style="color:#e09142">5f</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain">           </span><span class="token comment" style="color:#6c6783">// total lifetime before disabling</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token class-name keyword" style="color:#ffcc99">float</span><span class="token plain"> shrinkDuration </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token number" style="color:#e09142">0.5f</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain">   </span><span class="token comment" style="color:#6c6783">// time spent shrinking before disable</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">private</span><span class="token plain"> </span><span class="token class-name">Vector3</span><span class="token plain"> startPos</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">private</span><span class="token plain"> </span><span class="token class-name keyword" style="color:#ffcc99">float</span><span class="token plain"> randomOffset</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">private</span><span class="token plain"> </span><span class="token class-name">Camera</span><span class="token plain"> mainCam</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">private</span><span class="token plain"> </span><span class="token class-name keyword" style="color:#ffcc99">float</span><span class="token plain"> disableTime</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">private</span><span class="token plain"> </span><span class="token class-name keyword" style="color:#ffcc99">bool</span><span class="token plain"> isShrinking </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ffcc99">false</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">private</span><span class="token plain"> </span><span class="token class-name">Vector3</span><span class="token plain"> originalScale</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">OnEnable</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        mainCam </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> Camera</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">main</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        startPos </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> transform</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">position</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        randomOffset </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> Random</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">Range</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token number" style="color:#e09142">0f</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token number" style="color:#e09142">100f</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        originalScale </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> transform</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">localScale</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        transform</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">localScale </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> originalScale</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"> </span><span class="token comment" style="color:#6c6783">// reset size</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        disableTime </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> Time</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">time </span><span class="token operator" style="color:#e09142">+</span><span class="token plain"> lifetime</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        isShrinking </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ffcc99">false</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">Update</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">mainCam </span><span class="token operator" style="color:#e09142">==</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">null</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">return</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token comment" style="color:#6c6783">// Floating up/down</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token class-name keyword" style="color:#ffcc99">float</span><span class="token plain"> yOffset </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> Mathf</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">Sin</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">Time</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">time </span><span class="token operator" style="color:#e09142">+</span><span class="token plain"> randomOffset</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">*</span><span class="token plain"> floatFrequency</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">*</span><span class="token plain"> floatAmplitude</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token comment" style="color:#6c6783">// Smooth drift in XY</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token class-name keyword" style="color:#ffcc99">float</span><span class="token plain"> xOffset </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">Mathf</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">PerlinNoise</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">Time</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">time </span><span class="token operator" style="color:#e09142">+</span><span class="token plain"> randomOffset</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">*</span><span class="token plain"> driftSpeed</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token number" style="color:#e09142">0f</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">-</span><span class="token plain"> </span><span class="token number" style="color:#e09142">0.5f</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">*</span><span class="token plain"> </span><span class="token number" style="color:#e09142">2f</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">*</span><span class="token plain"> driftRadius</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token class-name keyword" style="color:#ffcc99">float</span><span class="token plain"> yDrift </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">Mathf</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">PerlinNoise</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token number" style="color:#e09142">0f</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">Time</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">time </span><span class="token operator" style="color:#e09142">+</span><span class="token plain"> randomOffset</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">*</span><span class="token plain"> driftSpeed</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">-</span><span class="token plain"> </span><span class="token number" style="color:#e09142">0.5f</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">*</span><span class="token plain"> </span><span class="token number" style="color:#e09142">2f</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">*</span><span class="token plain"> driftRadius</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token class-name">Vector3</span><span class="token plain"> newPos </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> startPos </span><span class="token operator" style="color:#e09142">+</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">xOffset</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> yOffset </span><span class="token operator" style="color:#e09142">+</span><span class="token plain"> yDrift</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token number" style="color:#e09142">0f</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token comment" style="color:#6c6783">// Clamp inside viewport</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token class-name">Vector3</span><span class="token plain"> viewportPos </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> mainCam</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">WorldToViewportPoint</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">newPos</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        viewportPos</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">x </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> Mathf</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">Clamp01</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">viewportPos</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">x</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        viewportPos</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">y </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> Mathf</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">Clamp01</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">viewportPos</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">y</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        newPos </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> mainCam</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">ViewportToWorldPoint</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">viewportPos</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        transform</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">position </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> newPos</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token comment" style="color:#6c6783">// Shrink before disabling</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token operator" style="color:#e09142">!</span><span class="token plain">isShrinking </span><span class="token operator" style="color:#e09142">&amp;&amp;</span><span class="token plain"> Time</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">time </span><span class="token operator" style="color:#e09142">&gt;=</span><span class="token plain"> disableTime </span><span class="token operator" style="color:#e09142">-</span><span class="token plain"> shrinkDuration</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            isShrinking </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ffcc99">true</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token function" style="color:#9a86fd">StartCoroutine</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token function" style="color:#9a86fd">ShrinkAndDisable</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">private</span><span class="token plain"> </span><span class="token return-type class-name">System</span><span class="token return-type class-name punctuation" style="color:#6c6783">.</span><span class="token return-type class-name">Collections</span><span class="token return-type class-name punctuation" style="color:#6c6783">.</span><span class="token return-type class-name">IEnumerator</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">ShrinkAndDisable</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token class-name">Vector3</span><span class="token plain"> startScale </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> transform</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">localScale</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token class-name keyword" style="color:#ffcc99">float</span><span class="token plain"> t </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token number" style="color:#e09142">0f</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">t </span><span class="token operator" style="color:#e09142">&lt;</span><span class="token plain"> shrinkDuration</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            t </span><span class="token operator" style="color:#e09142">+=</span><span class="token plain"> Time</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">deltaTime</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token class-name keyword" style="color:#ffcc99">float</span><span class="token plain"> lerp </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> Mathf</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">Clamp01</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">t </span><span class="token operator" style="color:#e09142">/</span><span class="token plain"> shrinkDuration</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            transform</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">localScale </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> Vector3</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">Lerp</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">startScale</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> Vector3</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">zero</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> lerp</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token keyword" style="color:#ffcc99">yield</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">return</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">null</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        gameObject</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">SetActive</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token boolean" style="color:#ffcc99">false</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token comment" style="color:#6c6783">// Called by pool when reused</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">OnReused</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        transform</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">localScale </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> originalScale</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        isShrinking </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ffcc99">false</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The result of the whole object pooler setup is as follows:</p>
<div class="center_div_ipNX"><video style="width:100%" class="center_video_QRNx" controls=""><source src="https://50033.s3.ap-southeast-1.amazonaws.com/tutorials/object-pooler.mp4" type="video/mp4">Your browser does not support the video tag.</video></div>
<p>Observation:</p>
<ul>
<li>Objects are spawned at runtime and never destroyed, only deactivated</li>
<li>Inactive objects are seen as &quot;ready&quot; items in the pool, there&#x27;s <span class="orange-bold">no need</span> to explicitly write a method to &quot;return&quot; object into the pool</li>
<li>The ObjectPooler is a Singleton, but the objects in the pools are not (they&#x27;re children of the <code>Container</code>)</li>
<li>You can implement the reuse logic on the object itself as long as you attach a MonoBehaviour script that implements <code>IPoolable</code></li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="caveats">Caveats<a href="#caveats" class="hash-link" aria-label="Direct link to Caveats" title="Direct link to Caveats">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="performance-tradeoffs">Performance Tradeoffs<a href="#performance-tradeoffs" class="hash-link" aria-label="Direct link to Performance Tradeoffs" title="Direct link to Performance Tradeoffs">​</a></h3>
<p>The purpose of object pooling is to improve performance, but if we preload a very large number of objects (thousands) at <code>Awake()</code>, the startup time and memory footprint can spike. For example, hundreds of bullets, particles, or enemies all created up front may cause a noticeable hitch on low-end devices.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="state-leakage">State Leakage<a href="#state-leakage" class="hash-link" aria-label="Direct link to State Leakage" title="Direct link to State Leakage">​</a></h3>
<p>Resetting pooled objects is tricky. We&#x27;ve handled scale, rotation, rigidbodies, and custom <code>IPoolable.OnReused</code>, but pooled objects may still carry <strong>hidden</strong> state (e.g., animations mid-clip, timers, NavMeshAgent state, static variables). If reset logic misses something, you get inconsistent behavior that only appears after reuse.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="scene-reloading-edge-cases">Scene Reloading Edge Cases<a href="#scene-reloading-edge-cases" class="hash-link" aria-label="Direct link to Scene Reloading Edge Cases" title="Direct link to Scene Reloading Edge Cases">​</a></h3>
<p>We&#x27;re subscribing to <code>SceneManager.sceneLoaded</code> to re-initialize pools. However, if <code>itemsToPool</code> is not updated before scene load, the pool may rebuild with the wrong prefab set or wipe existing objects unexpectedly.</p>
<p>Also, pooled objects under the <code>SceneContainer</code> won’t persist because that’s what we wanted. This is <span class="red-bold">not suitable</span> for persistent projectiles or effects across scenes.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/50033/resources/general/sprite-resolver"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Using Sprite Resolver With Sprite Library</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-object-pooler" class="table-of-contents__link toc-highlight">The Object Pooler</a><ul><li><a href="#objecttype" class="table-of-contents__link toc-highlight">ObjectType</a></li><li><a href="#objectpoolitem" class="table-of-contents__link toc-highlight">ObjectPoolItem</a></li><li><a href="#existingpoolitem" class="table-of-contents__link toc-highlight">ExistingPoolItem</a></li><li><a href="#objectpooler" class="table-of-contents__link toc-highlight">ObjectPooler</a></li><li><a href="#spawnfrompooler" class="table-of-contents__link toc-highlight">SpawnFromPooler</a></li><li><a href="#ipoolable" class="table-of-contents__link toc-highlight">IPoolable</a></li><li><a href="#returning-object-to-the-pool" class="table-of-contents__link toc-highlight">Returning Object to the pool</a></li></ul></li><li><a href="#demo" class="table-of-contents__link toc-highlight">Demo</a></li><li><a href="#caveats" class="table-of-contents__link toc-highlight">Caveats</a><ul><li><a href="#performance-tradeoffs" class="table-of-contents__link toc-highlight">Performance Tradeoffs</a></li><li><a href="#state-leakage" class="table-of-contents__link toc-highlight">State Leakage</a></li><li><a href="#scene-reloading-edge-cases" class="table-of-contents__link toc-highlight">Scene Reloading Edge Cases</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 50.033 Game Design and Development</div></div></div></footer></div>
</body>
</html>