<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-babies/animation" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Animation | Game Development and Design</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://natalieagus.github.io/50033/docs/babies/animation"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Animation | Game Development and Design"><meta data-rh="true" name="description" content="The lab handout uses Super Mario Bros as assets to demonstrate certain Unity features and functionalities. You are free to follow along and submit it for checkoff, OR you can also create an entirely new project to demonstrate the requested feature(s)."><meta data-rh="true" property="og:description" content="The lab handout uses Super Mario Bros as assets to demonstrate certain Unity features and functionalities. You are free to follow along and submit it for checkoff, OR you can also create an entirely new project to demonstrate the requested feature(s)."><link data-rh="true" rel="icon" href="/50033/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://natalieagus.github.io/50033/docs/babies/animation"><link data-rh="true" rel="alternate" href="https://natalieagus.github.io/50033/docs/babies/animation" hreflang="en"><link data-rh="true" rel="alternate" href="https://natalieagus.github.io/50033/docs/babies/animation" hreflang="x-default"><script src="https://cdn.jsdelivr.net/npm/brython@3.9.5/brython.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/brython@3.9.5/brython_stdlib.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/50033/assets/css/styles.9cdf0fa5.css">
<script src="/50033/assets/js/runtime~main.b4bc25fd.js" defer="defer"></script>
<script src="/50033/assets/js/main.f19bfd8a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/50033/img/home-logo.svg"><link rel="preload" as="image" href="/50033/assets/images/2023-08-03-10-26-52-db11fff1f84584768e959775d6a09f16.png"><link rel="preload" as="image" href="/50033/assets/images/2023-08-03-10-28-16-fb83ffab44a2ce51e4b1096e7cf27af4.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_jvwV"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/50033/"><div class="navbar__logo"><img src="/50033/img/home-logo.svg" alt="DDW Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/50033/img/home-logo.svg" alt="DDW Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">50.033</b></a><a class="navbar__item navbar__link" href="/50033/about/intro">About</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/50033/docs/syllabus">Lab Docs</a><a class="navbar__item navbar__link" href="/50033/resources/category/general-resources">Resources</a></div><div class="navbar__items navbar__items--right"><div class="searchBox_H2mL"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div><a href="https://github.com/natalieagus/50033" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_eExm"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_RSuS"><div class="sidebarViewport_pYEE"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/50033/"><img src="/50033/img/home-logo.svg" alt="DDW Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/50033/img/home-logo.svg" alt="DDW Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"><b>50.033</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/50033/docs/syllabus">Syllabus</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/50033/docs/category/unity-for-newborns">Unity for Newborns</a><button aria-label="Expand sidebar category &#x27;Unity for Newborns&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/50033/docs/category/unity-for-babies">Unity for Babies</a><button aria-label="Collapse sidebar category &#x27;Unity for Babies&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/50033/docs/babies/animation">Animation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/50033/docs/babies/camera">Camera Movement</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/50033/docs/babies/physics">Physics2D</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/50033/docs/babies/checkoff">Checkoff</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/50033/docs/category/unity-for-toddlers">Unity for Toddlers</a><button aria-label="Expand sidebar category &#x27;Unity for Toddlers&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/50033/docs/category/unity-for-children">Unity for Children</a><button aria-label="Expand sidebar category &#x27;Unity for Children&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/50033/docs/category/unity-for-teens">Unity for Teens</a><button aria-label="Expand sidebar category &#x27;Unity for Teens&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/50033/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/50033/docs/category/unity-for-babies"><span itemprop="name">Unity for Babies</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Animation</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Animation</h1></header>
<div class="theme-admonition theme-admonition-caution alert alert--warning admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Lab Checkoff Requirements</div><div class="admonitionContent_vXIg"><p>The lab handout uses Super Mario Bros as assets to demonstrate certain Unity features and functionalities. You are free to follow along and submit it for checkoff, <strong>OR you can also create an entirely new project to demonstrate the requested feature(s)</strong>.</p><p>The requirement(s) for the lab checkoff can be found <a href="/50033/docs/babies/checkoff">here</a>.</p></div></div>
<p>You can continue from where you left off in the previous Lab. Note that you <strong>need</strong> to finish the previous lab before starting on this one. In this lab we will upgrade our game by adding animation, sound effect, camera movement, and <strong>obstacles</strong> (leveraging on Unity&#x27;s Physics2D engine) in the game.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="marios-animation">Mario&#x27;s Animation<a href="#marios-animation" class="hash-link" aria-label="Direct link to Mario&#x27;s Animation" title="Direct link to Mario&#x27;s Animation">​</a></h2>
<p>Mario’s animation can be broken down into five main states:</p>
<ul>
<li><strong>Idle</strong> state, when he’s not moving at all</li>
<li><strong>Running</strong> state, when he’s moving left or right</li>
<li><strong>Skidding</strong> state, when he switches direction while running and brake too hard</li>
<li><strong>Jumping</strong> state, when he’s off the ground</li>
<li><strong>Death</strong> state, when he hits the enemy</li>
</ul>
<blockquote>
<p>The Mario sprite given in the starter asset already contain the corresponding sprite that’s suitable for each state.</p>
</blockquote>
<p>To begin animating a GameObject, we need these things:</p>
<ul>
<li>An <code>Animator</code> element attached to the GameObject,</li>
<li>An Animator <code>Controller</code> (need to create it in the Project Window under <code>Assets</code>),</li>
<li>and several <strong>Animation Clips</strong> to be managed by the controller.</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="animation-controller">Animation Controller<a href="#animation-controller" class="hash-link" aria-label="Direct link to Animation Controller" title="Direct link to Animation Controller">​</a></h3>
<p>Open the Animation Window (Window &gt;&gt; Animation &gt;&gt; Animation), then click on Mario. You will be then prompted to create an <strong>Animator</strong> for Mario, along with an animation clip. When you click <code>create</code>, both are created by default. You can then begin <strong>recording</strong> Mario&#x27;s changes on each frame/time on the <a href="https://docs.unity3d.com/Manual/animeditor-AdvancedKeySelectionAndManipulation.html" target="_blank" rel="noopener noreferrer">dopesheet</a>. First, create the folders: <code>Assets/Animation/Mario</code> to contain all your Mario animation. Then, here&#x27;s how to create a running Mario animation:</p>
<div class="center_div_ipNX"><video style="width:100%" class="center_video_QRNx" controls=""><source src="https://50033.s3.ap-southeast-1.amazonaws.com/week-2/create-mario-anim-run.mp4" type="video/mp4">Your browser does not support the video tag.</video></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="animation-clips">Animation Clips<a href="#animation-clips" class="hash-link" aria-label="Direct link to Animation Clips" title="Direct link to Animation Clips">​</a></h3>
<p>Now create three more animation <strong>clips</strong> for idle, skidding, and jumping:</p>
<div class="center_div_ipNX"><video style="width:100%" class="center_video_QRNx" controls=""><source src="https://50033.s3.ap-southeast-1.amazonaws.com/week-2/create-mario-other-anims.mp4" type="video/mp4">Your browser does not support the video tag.</video></div>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_vXIg"><p>Each GameObject that you want to animate should have one Animator (just one). Each Animator is responsible over <strong>several animation clips</strong> that you can create. Always create new animation clip from the Dopesheet when focusing on current GameObject with Animator attached. If you create it straight from the project inspector, then it won&#x27;t be automatically associated with the animation controller.</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="animator-state-machine">Animator State Machine<a href="#animator-state-machine" class="hash-link" aria-label="Direct link to Animator State Machine" title="Direct link to Animator State Machine">​</a></h3>
<p>If you press <code>Play</code> right now, you should see that your Mario immediately goes to play <code>mario-run</code> animation clip. We do not want that. We want to have the following animation depending on Mario&#x27;s state:</p>
<ol>
<li>If Mario&#x27;s moving (have velocity), then we play <code>mario-run</code> clip on a loop</li>
<li>If Mario&#x27;s off the ground, then we play <code>mario-jump</code> clip</li>
<li>If we change Mario&#x27;s running direction from right to left, we want it to play <code>mario-skid</code> clip</li>
<li>Otherwise, Mario stays at <code>mario-idle</code> clip</li>
</ol>
<p>To enable correct transition conditions, we need to create <code>parameters</code>. These parameters will be used to trigger transition between each animation clip (motion). Create these three parameters on Animator Window:</p>
<ul>
<li><code>onGround</code> of type bool</li>
<li><code>xSpeed</code> of type float</li>
<li><code>onSkid</code> of type trigger (a boolean parameter that is reset by the controller when <strong>consumed</strong> by a transition)</li>
</ul>
<p>Then add the following inside <code>PlayerMovement.cs</code>:</p>
<div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#2a2734;--prism-color:#9a86fd"><div class="codeBlockTitle_Ktv7">PlayerMovement.cs</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar" style="background-color:#2a2734;color:#9a86fd"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token comment" style="color:#6c6783">// for animation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token class-name">Animator</span><span class="token plain"> marioAnimator</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">Start</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token comment" style="color:#6c6783">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token comment" style="color:#6c6783">// update animator state</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">        marioAnimator</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">SetBool</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;onGround&quot;</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> onGroundState</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">Update</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">Input</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">GetKeyDown</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;a&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">&amp;&amp;</span><span class="token plain"> faceRightState</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            faceRightState </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ffcc99">false</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            marioSprite</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">flipX </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ffcc99">true</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token keyword" style="color:#ffcc99">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">marioBody</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">linearVelocity</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">x </span><span class="token operator" style="color:#e09142">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#e09142">0.1f</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">                marioAnimator</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">SetTrigger</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;onSkid&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">Input</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">GetKeyDown</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;d&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">&amp;&amp;</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">!</span><span class="token plain">faceRightState</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            faceRightState </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ffcc99">true</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            marioSprite</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">flipX </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ffcc99">false</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token keyword" style="color:#ffcc99">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">marioBody</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">linearVelocity</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">x </span><span class="token operator" style="color:#e09142">&lt;</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">-</span><span class="token number" style="color:#e09142">0.1f</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">                marioAnimator</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">SetTrigger</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;onSkid&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">        marioAnimator</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">SetFloat</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;xSpeed&quot;</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> Mathf</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">Abs</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">marioBody</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">linearVelocity</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">x</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">OnCollisionEnter2D</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token class-name">Collision2D</span><span class="token plain"> col</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">col</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">gameObject</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">CompareTag</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;Ground&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">&amp;&amp;</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">!</span><span class="token plain">onGroundState</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">            onGroundState </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ffcc99">true</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token comment" style="color:#6c6783">// update animator state</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">            marioAnimator</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">SetBool</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;onGround&quot;</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> onGroundState</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">FixedUpdate</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token comment" style="color:#6c6783">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">Input</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">GetKeyDown</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;space&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">&amp;&amp;</span><span class="token plain"> onGroundState</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            marioBody</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">AddForce</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">Vector2</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">up </span><span class="token operator" style="color:#e09142">*</span><span class="token plain"> upSpeed</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> ForceMode2D</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">Impulse</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            onGroundState </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ffcc99">false</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token comment" style="color:#6c6783">// update animator state</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">            marioAnimator</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">SetBool</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;onGround&quot;</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> onGroundState</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="transition-time">Transition Time<a href="#transition-time" class="hash-link" aria-label="Direct link to Transition Time" title="Direct link to Transition Time">​</a></h3>
<p>Let&#x27;s gradually test it by setting Mario&#x27;s running animation first. Pay attention on when we <strong>untick</strong> exit time and <strong>setting</strong> the transition duration to 0:</p>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Transition duration</div><div class="admonitionContent_vXIg"><p>Transition duration: The duration of the transition itself, in normalized time or seconds depending on the Fixed Duration mode, relative to the current state’s duration. This is visualized in the transition graph as the portion between the two blue markers.</p></div></div>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Exit time</div><div class="admonitionContent_vXIg"><p>If Has Exit Time is checked, this value represents the exact time at which the transition can take effect. This is represented in normalized time (for example, an exit time of 0.75 means that on the first frame where 75% of the animation has played, the Exit Time condition is true). On the next frame, the condition is false.</p></div></div>
<div class="center_div_ipNX"><video style="width:100%" class="center_video_QRNx" controls=""><source src="https://50033.s3.ap-southeast-1.amazonaws.com/week-2/set-animation-transition-run.mp4" type="video/mp4">Your browser does not support the video tag.</video></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exit-time">Exit time<a href="#exit-time" class="hash-link" aria-label="Direct link to Exit time" title="Direct link to Exit time">​</a></h3>
<p>Now complete the rest of the state animation state machine. It will definitely take a bit of time to setup the right <strong>exit</strong> time. We want most transition to happen <strong>immediately</strong>, but the transition between skidding state and running state should have some exit time. What we want is for the entire skidding state to complete (all frames played) before transitioning to the running state. The transition itself takes no time.</p>
<div class="theme-admonition theme-admonition-important alert alert--info admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_vXIg"><p>Read more documentation on <a href="https://docs.unity3d.com/Manual/class-Transition.html" target="_blank" rel="noopener noreferrer">transition properties here</a>.</p></div></div>
<p>Here&#x27;s a sped up recording to help you out. Pause it at certain key frames if needed. The key is to always check your output frequently.</p>
<div class="center_div_ipNX"><video style="width:100%" class="center_video_QRNx" controls=""><source src="https://50033.s3.ap-southeast-1.amazonaws.com/week-2/set-animation-therest.mp4" type="video/mp4">Your browser does not support the video tag.</video></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="animation-event">Animation Event<a href="#animation-event" class="hash-link" aria-label="Direct link to Animation Event" title="Direct link to Animation Event">​</a></h3>
<p>We can create animation events on animation clips, of which we can <strong>subscribe</strong> a callback from a script <strong>attached</strong> to the GameObject where that animator is added to, as long as the signature matches (<code>void</code> return type, and accepting either of the parameters: <code>Float</code>, <code>Int</code>, <code>String</code>, or <code>Object</code>).</p>
<div class="theme-admonition theme-admonition-caution alert alert--warning admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_vXIg"><p>As stated in the <a href="https://docs.unity3d.com/Manual/AnimationEventsOnImportedClips.html" target="_blank" rel="noopener noreferrer">documentation</a>, make sure that any <strong>GameObject</strong> which uses this animation in its animator has a corresponding script attached that contains a <strong>function</strong> with a matching event name. If you wish to call other functions in other script, you need to create a <strong>custom</strong> animation event tool script. You will learn more about this in Week 3.</p></div></div>
<p>For instance, let&#x27;s say we want to play a sound effect whenever Mario jumps. First, create the following global variable and function in <code>PlayerMovement.cs</code>:</p>
<div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#2a2734;--prism-color:#9a86fd"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar" style="background-color:#2a2734;color:#9a86fd"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token comment" style="color:#6c6783">// for audio</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token class-name">AudioSource</span><span class="token plain"> marioAudio</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">PlayJumpSound</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token comment" style="color:#6c6783">// play jump sound</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        marioAudio</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">PlayOneShot</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">marioAudio</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">clip</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then:</p>
<ol>
<li>Create AudioSource component at Mario GameObject, and load the <code>smb_jump_small</code> AudioClip. Ensure that you disable Play on Awake property.</li>
<li>Then link this AudioSource component to <code>marioAudio</code> on the script from the inspector</li>
<li>Open <code>mario_jump</code> animation clip, and create an event at timestamp <code>0:00</code> as shown in the recording below</li>
<li>Ensure that <code>mario-jump</code> Animation clip Loop Time property is <strong>unticked</strong></li>
</ol>
<div class="center_div_ipNX"><video style="width:100%" class="center_video_QRNx" controls=""><source src="https://50033.s3.ap-southeast-1.amazonaws.com/week-2/anim-event.mp4" type="video/mp4">Your browser does not support the video tag.</video></div>
<div class="theme-admonition theme-admonition-playtest alert alert--playtest admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 122.88 122.88"><path d="M61.44 0c33.93 0 61.44 27.51 61.44 61.44s-27.51 61.44-61.44 61.44S0 95.37 0 61.44 27.51 0 61.44 0m23.47 65.52c3.41-2.2 3.41-4.66 0-6.61L49.63 38.63c-2.78-1.75-5.69-.72-5.61 2.92l.11 40.98c.24 3.94 2.49 5.02 5.8 3.19z" style="fill-rule:evenodd;clip-rule:evenodd"></path></svg></span>test</div><div class="admonitionContent_vXIg"><p>You should hear the jumping sound effect <strong>exactly ONCE</strong> each time Mario jumps.</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="death-animation">Death Animation<a href="#death-animation" class="hash-link" aria-label="Direct link to Death Animation" title="Direct link to Death Animation">​</a></h3>
<p>Now add death animation and sound effects. This is slightly more complicated because we want Mario to:</p>
<ol>
<li>Show the death sprite when colliding with Goomba</li>
<li>Apply impulse force upwards</li>
<li>Play death sound effect (<code>smb_death.mp3</code>), <a href="https://www.dropbox.com/scl/fi/fbskuwdv5nd01fgstghg0/smb_death.mp3?rlkey=8w4ufx5sic7f3homrjhctxy7y&amp;dl=0" target="_blank" rel="noopener noreferrer">download here</a></li>
<li>Then show Game Over scene</li>
<li>Restart everything when restart button is pressed</li>
</ol>
<p>Here&#x27;s the overview of the end product:</p>
<div class="center_div_ipNX"><video style="width:100%" class="center_video_QRNx" controls=""><source src="https://50033.s3.ap-southeast-1.amazonaws.com/week-2/mario-death.mp4" type="video/mp4">Your browser does not support the video tag.</video></div>
<p>First, create a <code>mario_die</code> animation with 4 samples, simply changing the sprite.</p>
<ul>
<li>Add <code>gameRestart</code> Trigger parameter to Mario&#x27;s animator</li>
<li>Remove &quot;Has Exit Time&quot;, we want Mario to go back to <code>idle</code> state immediately when the game is restarted</li>
<li>Add transition between <code>mario_die</code> to <code>mario_idle</code></li>
<li>and add the <code>gameRestart</code> condition to this newly created transition</li>
</ul>
<section><img src="/50033/assets/images/2023-08-03-10-26-52-db11fff1f84584768e959775d6a09f16.png" class="center_image_tcFY" style="width:100%"></section>
<p>Also, make sure to <strong>turn off</strong> <code>Loop Time</code> in <code>mario_die</code> animation clip. This is because we don&#x27;t want the clip to loop and just play it once.</p>
<section><img src="/50033/assets/images/2023-08-03-10-28-16-fb83ffab44a2ce51e4b1096e7cf27af4.png" class="center_image_tcFY" style="width:50%"></section>
<p>Then head to <code>PlayerMovement.cs</code> and edit the <code>OnTriggerEnter2D</code> and <code>ResetGame</code>, while adding these two functions:</p>
<div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#2a2734;--prism-color:#9a86fd"><div class="codeBlockTitle_Ktv7">PlayerMovement.cs</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar" style="background-color:#2a2734;color:#9a86fd"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token class-name">AudioClip</span><span class="token plain"> marioDeath</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token class-name keyword" style="color:#ffcc99">float</span><span class="token plain"> deathImpulse </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token number" style="color:#e09142">15</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token comment" style="color:#6c6783">// state</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">[</span><span class="token plain">System</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">NonSerialized</span><span class="token punctuation" style="color:#6c6783">]</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token class-name keyword" style="color:#ffcc99">bool</span><span class="token plain"> alive </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ffcc99">true</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">PlayDeathImpulse</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">        marioBody</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">AddForce</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">Vector2</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">up </span><span class="token operator" style="color:#e09142">*</span><span class="token plain"> deathImpulse</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> ForceMode2D</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">Impulse</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">GameOverScene</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token comment" style="color:#6c6783">// stop time</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">        Time</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">timeScale </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token number" style="color:#e09142">0.0f</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token comment" style="color:#6c6783">// set gameover scene</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">        gameManager</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">GameOver</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"> </span><span class="token comment" style="color:#6c6783">// replace this with whichever way you triggered the game over screen for Checkoff 1</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">OnTriggerEnter2D</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token class-name">Collider2D</span><span class="token plain"> other</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">other</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">gameObject</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">CompareTag</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;Enemy&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">&amp;&amp;</span><span class="token plain"> alive</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            Debug</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">Log</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;Collided with goomba!&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token comment" style="color:#6c6783">// play death animation</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">            marioAnimator</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">Play</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;mario-die&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">            marioAudio</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">PlayOneShot</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">marioDeath</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">            alive </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ffcc99">false</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">ResetGame</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token comment" style="color:#6c6783">// reset position</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        marioBody</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">position </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token operator" style="color:#e09142">-</span><span class="token number" style="color:#e09142">5.33f</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">-</span><span class="token number" style="color:#e09142">4.69f</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> </span><span class="token number" style="color:#e09142">0.0f</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token comment" style="color:#6c6783">// ... other instruction</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token comment" style="color:#6c6783">// reset animation</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">        marioAnimator</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">SetTrigger</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;gameRestart&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">        alive </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ffcc99">true</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The idea is not to immediately stop time when Mario collides with Goomba but to play the animation first for about 1 second before stopping time, to give enough time for the Physics engine to simulate the effect of <code>deathImpulse</code>. We also have the <strong>state</strong> <code>alive</code> to prevent collision with Goomba to be re-triggered. Then create <strong>two events</strong> in <code>mario_die</code> animation, one to trigger <code>PlayDeathImpulse</code> and the other to trigger <code>GameOverScene</code>. Hook it up to the respective functions in <code>PlayerMovement.cs</code>. Also, do not forget to link up the <code>AudioClip</code> (<code>MarioDeath</code>) in the Inspector:</p>
<div class="center_div_ipNX"><video style="width:100%" class="center_video_QRNx" controls=""><source src="https://50033.s3.ap-southeast-1.amazonaws.com/week-2/setup-death-script.mp4" type="video/mp4">Your browser does not support the video tag.</video></div>
<div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_vXIg"><p>Also notice how although <code>alive</code> is a public state, we do not see it serialized in the inspector due to <code>[System.NonSerialized]</code> <a href="https://learn.microsoft.com/en-us/dotnet/csharp/advanced-topics/reflection-and-attributes/" target="_blank" rel="noopener noreferrer">attribute</a>.</p></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="disable-control-when-not-alive">Disable Control when not <code>alive</code><a href="#disable-control-when-not-alive" class="hash-link" aria-label="Direct link to disable-control-when-not-alive" title="Direct link to disable-control-when-not-alive">​</a></h2>
<p>The final thing that you need to do is to <strong>disable</strong> Mario&#x27;s movement when he is <strong>dead</strong>. Modify <code>PlayerMovement.cs</code> <code>FixedUpdate</code>:</p>
<div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#2a2734;--prism-color:#9a86fd"><div class="codeBlockTitle_Ktv7">PlayerMovement.cs</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar" style="background-color:#2a2734;color:#9a86fd"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">FixedUpdate</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">alive</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token class-name keyword" style="color:#ffcc99">float</span><span class="token plain"> moveHorizontal </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> Input</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">GetAxisRaw</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;Horizontal&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token comment" style="color:#6c6783">// other code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_vXIg"><p>Our game starts to become a little <span class="orange-bold">messier</span>. We have states everywhere: player&#x27;s status (alive or dead), score, game state (stopped or restarted), etc. We should have sort of <code>GameManager</code> that&#x27;s supposed to manage the game but many other scripts that sort of manages itself (like <code>PlayerMovement.cs</code>). We will refactor our game to have a better architecture next week.</p></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fix-gamerestart-bug">Fix gameRestart Bug<a href="#fix-gamerestart-bug" class="hash-link" aria-label="Direct link to Fix gameRestart Bug" title="Direct link to Fix gameRestart Bug">​</a></h2>
<p>When the restart button is pressed while Mario is <strong>NOT</strong> in <code>mario-die</code> state in the animator, we will inadvertently set <code>gameRestart</code> trigger in the Animator, disallowing <code>mario-die</code> clip to play the <strong>next</strong> time he collides with Goomba. What we want is to <span class="orange-bold">consume</span> <code>gameRestart</code> trigger in <code>mario-idle</code> just in case a player restarts the game while Mario isn&#x27;t dead.</p>
<ol>
<li>Create a transition from mario-idle to mario-idle</li>
<li>Remove HasExitTime</li>
<li>Add transition condition as <code>gameRestart</code></li>
</ol>
<p>The following clip demonstrates both the bug and the fix:</p>
<div class="center_div_ipNX"><video style="width:100%" class="center_video_QRNx" controls=""><source src="https://50033.s3.ap-southeast-1.amazonaws.com/week-2/restart-fix.mp4" type="video/mp4">Your browser does not support the video tag.</video></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/50033/docs/category/unity-for-babies"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Unity for Babies</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/50033/docs/babies/camera"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Camera Movement</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#marios-animation" class="table-of-contents__link toc-highlight">Mario&#39;s Animation</a><ul><li><a href="#animation-controller" class="table-of-contents__link toc-highlight">Animation Controller</a></li><li><a href="#animation-clips" class="table-of-contents__link toc-highlight">Animation Clips</a></li><li><a href="#animator-state-machine" class="table-of-contents__link toc-highlight">Animator State Machine</a></li><li><a href="#transition-time" class="table-of-contents__link toc-highlight">Transition Time</a></li><li><a href="#exit-time" class="table-of-contents__link toc-highlight">Exit time</a></li><li><a href="#animation-event" class="table-of-contents__link toc-highlight">Animation Event</a></li><li><a href="#death-animation" class="table-of-contents__link toc-highlight">Death Animation</a></li></ul></li><li><a href="#disable-control-when-not-alive" class="table-of-contents__link toc-highlight">Disable Control when not <code>alive</code></a></li><li><a href="#fix-gamerestart-bug" class="table-of-contents__link toc-highlight">Fix gameRestart Bug</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 50.033 Game Design and Development</div></div></div></footer></div>
</body>
</html>