<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-babies/physics" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Physics2D | Game Development and Design</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://natalieagus.github.io/50033/docs/babies/physics"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Physics2D | Game Development and Design"><meta data-rh="true" name="description" content="The goal of this section is to create some obstacles (breakable boxes, platforms, static blocks, pipes) that exists in Super Mario Bros. Using this, we will learn more about Unity&#x27;s Physics2D Engine and manage our GameObjects by creating Prefabs (a sort of reusable object)."><meta data-rh="true" property="og:description" content="The goal of this section is to create some obstacles (breakable boxes, platforms, static blocks, pipes) that exists in Super Mario Bros. Using this, we will learn more about Unity&#x27;s Physics2D Engine and manage our GameObjects by creating Prefabs (a sort of reusable object)."><link data-rh="true" rel="icon" href="/50033/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://natalieagus.github.io/50033/docs/babies/physics"><link data-rh="true" rel="alternate" href="https://natalieagus.github.io/50033/docs/babies/physics" hreflang="en"><link data-rh="true" rel="alternate" href="https://natalieagus.github.io/50033/docs/babies/physics" hreflang="x-default"><script src="https://cdn.jsdelivr.net/npm/brython@3.9.5/brython.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/brython@3.9.5/brython_stdlib.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/50033/assets/css/styles.9cdf0fa5.css">
<script src="/50033/assets/js/runtime~main.1eee2edb.js" defer="defer"></script>
<script src="/50033/assets/js/main.f69b19a6.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/50033/img/home-logo.svg"><link rel="preload" as="image" href="/50033/assets/images/2023-08-04-09-52-37-84ecaf85bb7fb97f1cf6c74e5ad318d0.png"><link rel="preload" as="image" href="/50033/assets/images/2023-08-04-10-13-41-574c80c00894b2d89e37f9dc37edcd87.png"><link rel="preload" as="image" href="/50033/assets/images/2023-08-05-10-33-49-43186b1e59d1c69c4b5e2c3516462d75.png"><link rel="preload" as="image" href="/50033/assets/images/2023-08-05-10-38-05-6859398fa250609a03964272f3e8efa3.png"><link rel="preload" as="image" href="/50033/assets/images/2023-08-05-13-06-23-67105d27103b4b197477812dc0c05450.png"><link rel="preload" as="image" href="/50033/assets/images/2023-08-05-10-55-40-624bfeaea856bcc9c266ac50f96f67f5.png"><link rel="preload" as="image" href="/50033/assets/images/2023-08-05-11-27-12-7eed1d6ab10ea226c50a558e750907ef.png"><link rel="preload" as="image" href="/50033/assets/images/2023-08-05-12-59-58-e40d035041a8adc16be014eddf54690d.png"><link rel="preload" as="image" href="/50033/assets/images/2023-08-05-13-15-48-2637445f51859d3ff39c126fbcf0fedf.png"><link rel="preload" as="image" href="/50033/assets/images/2023-08-05-13-18-18-6a3288962475f402056887e110960987.png"><link rel="preload" as="image" href="/50033/assets/images/2023-08-05-13-44-06-eb97cfb1337dd1f5bb8f0b9ec34169d5.png"><link rel="preload" as="image" href="/50033/assets/images/2023-08-05-13-46-46-ea0977315d50333c7352c21d13fed1e6.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_jvwV"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/50033/"><div class="navbar__logo"><img src="/50033/img/home-logo.svg" alt="DDW Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/50033/img/home-logo.svg" alt="DDW Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">50.033</b></a><a class="navbar__item navbar__link" href="/50033/about/intro">About</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/50033/docs/syllabus">Lab Docs</a><a class="navbar__item navbar__link" href="/50033/resources/uidb">Resources</a></div><div class="navbar__items navbar__items--right"><div class="searchBox_H2mL"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div><a href="https://github.com/natalieagus/50033" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_eExm"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_RSuS"><div class="sidebarViewport_pYEE"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/50033/"><img src="/50033/img/home-logo.svg" alt="DDW Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/50033/img/home-logo.svg" alt="DDW Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"><b>50.033</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/50033/docs/syllabus">Syllabus</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/50033/docs/category/unity-for-newborns">Unity for Newborns</a><button aria-label="Expand sidebar category &#x27;Unity for Newborns&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/50033/docs/category/unity-for-babies">Unity for Babies</a><button aria-label="Collapse sidebar category &#x27;Unity for Babies&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/50033/docs/babies/animation">Animation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/50033/docs/babies/camera">Camera Movement</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/50033/docs/babies/physics">Physics2D</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/50033/docs/babies/checkoff">Checkoff</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/50033/docs/category/unity-for-toddlers">Unity for Toddlers</a><button aria-label="Expand sidebar category &#x27;Unity for Toddlers&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/50033/docs/category/unity-for-children">Unity for Children</a><button aria-label="Expand sidebar category &#x27;Unity for Children&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/50033/docs/category/unity-for-teens">Unity for Teens</a><button aria-label="Expand sidebar category &#x27;Unity for Teens&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/50033/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/50033/docs/category/unity-for-babies"><span itemprop="name">Unity for Babies</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Physics2D</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Physics2D</h1></header>
<p>The goal of this section is to create some obstacles (breakable boxes, platforms, static blocks, pipes) that exists in Super Mario Bros. Using this, we will learn more about Unity&#x27;s Physics2D Engine and manage our GameObjects by creating Prefabs (a sort of reusable object).</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="alternative-unity-tilemap">Alternative: Unity Tilemap<a href="#alternative-unity-tilemap" class="hash-link" aria-label="Direct link to Alternative: Unity Tilemap" title="Direct link to Alternative: Unity Tilemap">​</a></h2>
<p>In this section, we’ll focus on building a 2D platformer using <strong>individual</strong> <strong>sprites</strong> to introduce key concepts like <strong>Physics2D</strong> and character movement, giving us a solid foundation in Unity&#x27;s 2D game development tools.</p>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_vXIg"><p>Sprites serve as the <span class="orange-bold">visual</span> representations for objects, while Physics2D defines their <span class="orange-bold">movement</span>, <span class="orange-bold">collisions</span>, and <span class="orange-bold">interactions</span> in the game world.</p></div></div>
<p>While we&#x27;ll work with <strong>sprites</strong> for clarity and flexibility, <a href="https://learn.unity.com/tutorial/introduction-to-tilemaps" target="_blank" rel="noopener noreferrer">Unity&#x27;s Tilemap system</a> is an excellent alternative for creating grid-based environments efficiently. Once you grasp the basics, you can explore Tilemap to streamline level design and enhance your workflow for more complex projects.</p>
<div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_vXIg"><p><strong>To Use Tilemap:</strong> Tilemap is great for grid-based level design, offering efficient editing, automated tile placement, and optimised performance with fewer draw calls. It&#x27;s ideal for modular, repetitive environments in 2D platformers.</p><p><strong>Not to Use Tilemap:</strong> For detailed, non-repetitive, or dynamic environments, custom solutions like individual sprites or procedural generation offer more creative freedom but require more effort and may impact performance.</p></div></div>
<p>Super Mario Bros-style games are best suited for Unity&#x27;s Tilemap system, as it simplifies creating grid-based levels with <strong>reusable</strong> tiles, <strong>built-in collision handling</strong>, and <strong>efficient</strong> performance.</p>
<p>However, we’ll still use Physics2D with sprites here to facilitate learning, as it provides a clear understanding of movement, collisions, and interactions without relying on Tilemap-specific tools.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="constraint-z-rotation">Constraint Z-Rotation<a href="#constraint-z-rotation" class="hash-link" aria-label="Direct link to Constraint Z-Rotation" title="Direct link to Constraint Z-Rotation">​</a></h2>
<p>Notice how we always need Mario to stand upright, and not toppling when moving too fast. We definitely do not want Mario to topple when hitting other obstacles as well like this:</p>
<div class="center_div_ipNX"><video style="width:100%" class="center_video_QRNx" controls=""><source src="https://50033.s3.ap-southeast-1.amazonaws.com/week-2/topple.mp4" type="video/mp4">Your browser does not support the video tag.</video></div>
<p>In order to keep Mario standing upright, we need to place constraints on Mario’s Rigidbody2D Z-rotation component. From this screenshot, it should be pretty clear that we want Mario&#x27;s position (x,y) to vary but not his Z-rotation:</p>
<section><img src="/50033/assets/images/2023-08-04-09-52-37-84ecaf85bb7fb97f1cf6c74e5ad318d0.png" class="center_image_tcFY" style="width:100%"></section>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="prefab">Prefab<a href="#prefab" class="hash-link" aria-label="Direct link to Prefab" title="Direct link to Prefab">​</a></h2>
<p>In Unity’s Prefab system, Prefab Assets act as <strong>templates</strong>.</p>
<ul>
<li>You create Prefab Assets in the Editor, and they are saved as an Asset in the Project window</li>
<li>From Prefab Assets, you can create any number of Prefab instances.</li>
<li>Prefab instances can either be created in the editor and saved as part of your Scenes or instantiated at runtime.</li>
</ul>
<p>Why do we need to create Prefabs instead of regular GameObjects? To understand fully, create some obstacles for Mario.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bricks-and-question-box">Bricks and Question Box<a href="#bricks-and-question-box" class="hash-link" aria-label="Direct link to Bricks and Question Box" title="Direct link to Bricks and Question Box">​</a></h3>
<p>Now that our Mario can move around smoothly with proper animations, it’s time we add some obstacles. Adding bricks that Mario can jump on is easy: simply add Box Collider 2D element on every Brick and Question Box GameObject.</p>
<section><img src="/50033/assets/images/2023-08-04-10-13-41-574c80c00894b2d89e37f9dc37edcd87.png" class="center_image_tcFY" style="width:100%"></section>
<p>The <span class="orange-bold">problem</span> is that we have <strong>so many copies</strong> of those boxes and bricks in the game. We definitely do not want to manually add collider to all of them. To fix this, we need to create a <strong>Prefab</strong> of that brick and question box by <strong>dragging</strong> that GameObject into the Prefab folder. This recording should give you the idea:</p>
<div class="center_div_ipNX"><video style="width:100%" class="center_video_QRNx" controls=""><source src="https://50033.s3.ap-southeast-1.amazonaws.com/week-2/prefab.mp4" type="video/mp4">Your browser does not support the video tag.</video></div>
<blockquote>
<p>From the <a href="https://docs.unity3d.com/Manual/Prefabs.html" target="_blank" rel="noopener noreferrer">documentation</a>: Unity’s Prefab system allows you to <strong>create</strong>, <strong>configure</strong>, and <strong>store</strong> a GameObject complete with all its components, property values, and child GameObjects as a <span class="orange-bold">reusable</span> Asset. The Prefab Asset acts as a template from which you can create new Prefab instances in the Scene.</p>
</blockquote>
<p>We have the <code>Brick</code> and <code>Question Box</code> prefab now, and we can duplicate it across the Scene wherever we want to spawn it. Also, <a href="https://docs.unity3d.com/Manual/EditingInPrefabMode.html" target="_blank" rel="noopener noreferrer">a change made in the <strong>Prefab</strong> in the <strong>Prefab Mode</strong></a> will be applied across all prefabs. You can still however have Prefab <a href="https://docs.unity3d.com/Manual/PrefabVariants.html" target="_blank" rel="noopener noreferrer">variants</a> or <a href="https://docs.unity3d.com/Manual/PrefabInstanceOverrides.html" target="_blank" rel="noopener noreferrer">override</a> existing Prefab in the Scene if you want it to differ slightly from the base prefab template.</p>
<div class="theme-admonition theme-admonition-caution alert alert--warning admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_vXIg"><p>Please do not skip the <a href="https://docs.unity3d.com/Manual/Prefabs.html" target="_blank" rel="noopener noreferrer">documentation</a> and read them carefully.</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="pipes">Pipes<a href="#pipes" class="hash-link" aria-label="Direct link to Pipes" title="Direct link to Pipes">​</a></h3>
<p>Create the pipes prefabs too, setting the appropriate colliders so Mario can collide with it and climb on it. Pipe&#x27;s Head shape isn&#x27;t exactly rectangular, so you can use either of the two methods:</p>
<p><strong>Two <code>BoxCollider2D</code></strong>:</p>
<section><img src="/50033/assets/images/2023-08-05-10-33-49-43186b1e59d1c69c4b5e2c3516462d75.png" class="center_image_tcFY" style="width:100%"></section>
<p>Using one <strong><code>PollygonCollider2D</code></strong>, adjusting the shape to fit the Pipe head sprite:</p>
<div class="center_div_ipNX"><video style="width:100%" class="center_video_QRNx" controls=""><source src="https://50033.s3.ap-southeast-1.amazonaws.com/week-2/pollygoncollider.mp4" type="video/mp4">Your browser does not support the video tag.</video></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="goomba">Goomba<a href="#goomba" class="hash-link" aria-label="Direct link to Goomba" title="Direct link to Goomba">​</a></h3>
<p>Goomba should also be set as a prefab since we will spawn many of them at once. In the end, check that you have the following Prefabs:</p>
<section><img src="/50033/assets/images/2023-08-05-10-38-05-6859398fa250609a03964272f3e8efa3.png" class="center_image_tcFY" style="width:100%"></section>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="unpack-prefab">Unpack Prefab<a href="#unpack-prefab" class="hash-link" aria-label="Direct link to Unpack Prefab" title="Direct link to Unpack Prefab">​</a></h3>
<p>If you no longer want one of your GameObject to be associated with a prefab, simply right click on the GameObject in the Hierarchy and select Prefab &gt;&gt; Unpack Completely:</p>
<section><img src="/50033/assets/images/2023-08-05-13-06-23-67105d27103b4b197477812dc0c05450.png" class="center_image_tcFY" style="width:50%"></section>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="layers">Layers<a href="#layers" class="hash-link" aria-label="Direct link to Layers" title="Direct link to Layers">​</a></h2>
<p>We can create <code>Layers</code> via the Inspector of any GameObject to determine:</p>
<ol>
<li>What can be rendered (layer-based rendering)</li>
<li>What can collide with each other (layer-based collision)</li>
</ol>
<p>For <strong>layer-based rendering</strong>, we can decide what to be rendered (only a selection of layers) using the Camera&#x27;s <code>culling mask</code>. Unselecting a particular layer in the Camera&#x27;s culling mask property will omit it from being rendered in the Game Scene. Our focus now is the second point: layer-based collision. We need to decide what can collide with which object. For example, we:</p>
<ol>
<li>Do not need Unity to compute collision between the Pipe&#x27;s top head with the pipe&#x27;s body</li>
<li>Do not need Unity to compute collision between the Pipe&#x27;s body and the ground</li>
<li>Do not need Unity to trigger collision between Goomba and any of the obstacles or ground</li>
</ol>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="layer-based-collision">Layer-based Collision<a href="#layer-based-collision" class="hash-link" aria-label="Direct link to Layer-based Collision" title="Direct link to Layer-based Collision">​</a></h3>
<p><strong>Create</strong> two other layers via any GameObject Inspector: <code>Enemies</code> and <code>Obstacles</code>.</p>
<ol>
<li>Set <code>Pipes</code> GameObject Layer to <code>Obstacles</code>.</li>
<li>Set <code>Obstacles</code> GameObject Layer to <code>Obstacles</code> too.</li>
<li>Set all <code>Enemies</code> GameObject Layer to <code>Enemies</code>.</li>
</ol>
<blockquote>
<p>Apply it to all their <strong>children</strong>.</p>
</blockquote>
<div class="theme-admonition theme-admonition-warning alert alert--danger admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_vXIg"><p>Setting the Prefab changes via the Scene instead of Prefab Mode only applies to that instance of that Prefab. This discrepancy is highlighted clearly in the Hierarchy. You can then choose to update the prefab to follow your changes.</p></div></div>
<p>Then open <strong>Project Settings</strong> (Edit &gt;&gt; Project Settings) and set the collision matrix as such. If you untick the boxes that means Unity will ignore collisions between those layers:</p>
<section><img src="/50033/assets/images/2023-08-05-10-55-40-624bfeaea856bcc9c266ac50f96f67f5.png" class="center_image_tcFY" style="width:100%"></section>
<p>Here&#x27;s the complete walkthrough:</p>
<div class="center_div_ipNX"><video style="width:100%" class="center_video_QRNx" controls=""><source src="https://50033.s3.ap-southeast-1.amazonaws.com/week-2/collision-layer.mp4" type="video/mp4">Your browser does not support the video tag.</video></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="collision-with-obstacle-or-pipes">Collision with Obstacle or Pipes<a href="#collision-with-obstacle-or-pipes" class="hash-link" aria-label="Direct link to Collision with Obstacle or Pipes" title="Direct link to Collision with Obstacle or Pipes">​</a></h3>
<p>In <code>PlayerMovement.cs</code>, we have yet to take into account that Mario can land on top of a Pipe or a Box. This is what happens:</p>
<div class="center_div_ipNX"><video style="width:100%" class="center_video_QRNx" controls=""><source src="https://50033.s3.ap-southeast-1.amazonaws.com/week-2/mario-cant-jump.mp4" type="video/mp4">Your browser does not support the video tag.</video></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="more-tags">More Tags<a href="#more-tags" class="hash-link" aria-label="Direct link to More Tags" title="Direct link to More Tags">​</a></h3>
<p>We can fix that by checking for collision against <code>Obstacles</code> and <code>Pipes</code> too. Sure, we can <strong>add</strong> <code>Tag</code> to each pipe and each Goomba and do the following check:</p>
<div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#2a2734;--prism-color:#9a86fd"><div class="codeBlockTitle_Ktv7">PlayerMovement.cs</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar" style="background-color:#2a2734;color:#9a86fd"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">OnCollisionEnter2D</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token class-name">Collision2D</span><span class="token plain"> col</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">col</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">gameObject</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">CompareTag</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;Ground&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">||</span><span class="token plain"> col</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">gameObject</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">CompareTag</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;Enemies&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">||</span><span class="token plain"> col</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">gameObject</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">CompareTag</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;Obstacles&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">&amp;&amp;</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">!</span><span class="token plain">onGroundState</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            onGroundState </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ffcc99">true</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token comment" style="color:#6c6783">// update animator state</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            marioAnimator</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">SetBool</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;onGround&quot;</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> onGroundState</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_vXIg"><p>The usage of Tag can be controversial sometimes, with some complaining that it&#x27;s not resource efficient and whatever but there&#x27;s no denying that it is <span class="orange-bold">convenient</span>, especially in prototyping stage right now (yes, you&#x27;re building a game in less than 2 months, that&#x27;s just a prototype).</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="layermask">LayerMask<a href="#layermask" class="hash-link" aria-label="Direct link to LayerMask" title="Direct link to LayerMask">​</a></h3>
<p>However, let&#x27;s be a little fancier. Although Layers are essential (to avoid extra computation on collision and unwanted collision behavior, etc), we don&#x27;t want to manually <code>Tag</code> every GameObject in our Scene.</p>
<div class="theme-admonition theme-admonition-warning alert alert--danger admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_vXIg"><p>Please note that <code>CompareTag</code> is really fast, and there&#x27;s nothing wrong with the code above in terms of performance! We do not discard it for performance reason, but simply <em>preference</em> and extra convenience (not having to add Tags). Making a functional game is hard enough. If you don&#x27;t have performance issues, <strong>do not blatantly attempt to optimise</strong>. Code readability and modularity is more important than that.</p></div></div>
<p>Every <strong>layer</strong> that we set the GameObject to is represented by an <strong>integer</strong>:</p>
<section><img src="/50033/assets/images/2023-08-05-11-27-12-7eed1d6ab10ea226c50a558e750907ef.png" class="center_image_tcFY" style="width:50%"></section>
<p>We can then <strong>create</strong> a 32-bit <a href="https://docs.unity3d.com/ScriptReference/LayerMask.html" target="_blank" rel="noopener noreferrer">LayerMask</a>, a <strong>one-hot</strong> mapping of Layer id to a 32-bit value as such:</p>
<ol>
<li><code>Ground</code> is <code>0x00000008</code>
<ul>
<li>This translate to <code>0000 1000</code> in binary (leading zeroes are omitted)</li>
<li>The value <code>1</code> lies on the 3rd bit from the right (we count from 0, so 0th bit from the right is the LSB)</li>
<li>You can create this binary value using leftshift operation: <code>int groundMask = 1 &lt;&lt; 3</code></li>
</ul>
</li>
<li><code>Enemies</code> is <code>0x00000040</code></li>
<li><code>Obstacles</code> is <code>0x00000080</code></li>
</ol>
<p>To check if <code>LayerX</code> hits <code>LayerY</code>, we simply perform a bitwise <code>AND</code> between them and check if the resulting value is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">&gt;0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">0</span></span></span></span>.</p>
<p>We can modify <code>PlayerMovement.cs</code> into this:</p>
<div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#2a2734;--prism-color:#9a86fd"><div class="codeBlockTitle_Ktv7">PlayerMovement.cs</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar" style="background-color:#2a2734;color:#9a86fd"><code class="codeBlockLines_e6Vv"><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token class-name keyword" style="color:#ffcc99">int</span><span class="token plain"> collisionLayerMask </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token number" style="color:#e09142">1</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">&lt;&lt;</span><span class="token plain"> </span><span class="token number" style="color:#e09142">3</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token number" style="color:#e09142">1</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">&lt;&lt;</span><span class="token plain"> </span><span class="token number" style="color:#e09142">6</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token number" style="color:#e09142">1</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">&lt;&lt;</span><span class="token plain"> </span><span class="token number" style="color:#e09142">7</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">OnCollisionEnter2D</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token class-name">Collision2D</span><span class="token plain"> col</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">collisionLayerMask </span><span class="token operator" style="color:#e09142">&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token number" style="color:#e09142">1</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">&lt;&lt;</span><span class="token plain"> col</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">gameObject</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">layer</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#e09142">0</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">&amp;</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">!</span><span class="token plain">onGroundState</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">            onGroundState </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ffcc99">true</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">            </span><span class="token comment" style="color:#6c6783">// update animator state</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">            marioAnimator</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">SetBool</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;onGround&quot;</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> onGroundState</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-playtest alert alert--playtest admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 122.88 122.88"><path d="M61.44 0c33.93 0 61.44 27.51 61.44 61.44s-27.51 61.44-61.44 61.44S0 95.37 0 61.44 27.51 0 61.44 0m23.47 65.52c3.41-2.2 3.41-4.66 0-6.61L49.63 38.63c-2.78-1.75-5.69-.72-5.61 2.92l.11 40.98c.24 3.94 2.49 5.02 5.8 3.19z" style="fill-rule:evenodd;clip-rule:evenodd"></path></svg></span>test</div><div class="admonitionContent_vXIg"><p>The resulting behavior should be as follows, where Mario can now climb obstacles (both boxes and pipes):</p><div class="center_div_ipNX"><video style="width:100%" class="center_video_QRNx" controls=""><source src="https://50033.s3.ap-southeast-1.amazonaws.com/week-2/mario-can-climb.mp4" type="video/mp4">Your browser does not support the video tag.</video></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="profiler">Profiler<a href="#profiler" class="hash-link" aria-label="Direct link to Profiler" title="Direct link to Profiler">​</a></h2>
<p>If you <em>really</em> want to optimise your game, or feel like some part has high latency, you can use Unity&#x27;s Profiler to identify the root cause of the heavy computations. Select Window &gt;&gt; Analysis &gt;&gt; Profiler, and begin recording your gameplay.</p>
<div class="center_div_ipNX"><video style="width:100%" class="center_video_QRNx" controls=""><source src="https://50033.s3.ap-southeast-1.amazonaws.com/week-2/profiler.mp4" type="video/mp4">Your browser does not support the video tag.</video></div>
<p>Notice that it reports CPU usage at 33ms (30FPS) because we did set the game to play at 30FPS under the <code>Start()</code> method of <code>PlayerMovement.cs</code>. The rest of the results are pretty straightforward to inspect. You can <a href="https://www.youtube.com/watch?v=uXRURWwabF4" target="_blank" rel="noopener noreferrer">watch the official guide</a> here, but this is not part of our syllabus. We just want to show you the recommended way to even have an idea on <em>where</em> to optimise instead of optimising stuffs blindly.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="physics-2d">Physics 2D<a href="#physics-2d" class="hash-link" aria-label="Direct link to Physics 2D" title="Direct link to Physics 2D">​</a></h2>
<p>Unity&#x27;s Physics 2D engine handles 2D physics and optimises them. You don&#x27;t have to reinvent the wheels. In this section, we briefly introduce to you three more components: <strong>Effectors</strong>, <strong>Joints</strong>, and <strong>Materials</strong>. Please read the <a href="https://docs.unity3d.com/Manual/Physics2DReference.html" target="_blank" rel="noopener noreferrer">documentation</a> for a more detailed usage.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="effector2d">Effector2D<a href="#effector2d" class="hash-link" aria-label="Direct link to Effector2D" title="Direct link to Effector2D">​</a></h3>
<p>Suppose you want to create a platform that allows only one-way collision. You can upgrade your 2DColliders to be used with a new component called <a href="https://docs.unity3d.com/Manual/Effectors2D.html" target="_blank" rel="noopener noreferrer">effectors</a>. To demonstrate how this works, let’s create a platform where Mario can “climb onto” from underneath it but can stay upright on top of it.</p>
<blockquote>
<p>Yes, World 1-1 in Super Mario Bros doesn&#x27;t have this item, but we are just going to build it here for learning sake.</p>
</blockquote>
<p>Create a <code>platform</code> GameObject, and place it under Obstacles GameObject. Then,</p>
<ol>
<li>Add a <code>SpriteRenderer</code> with <code>moving_platform_6</code> as sprite</li>
<li>Add EdgeCollider2D and place it just at the top edge of the sprite. Tick the <code>Used By Effector</code> property</li>
<li>Add <code>PlatformEffector2D</code> and set the <code>SurfaceArc</code> to 180, and <code>OneWay</code> property ticked</li>
<li>Set its layer to &quot;Obstacles&quot;. Even though <code>Obstacles</code> parent GameObject has its layer set as <code>Obstacles</code>, this does not automatically propagate to its children all the time.</li>
</ol>
<section><img src="/50033/assets/images/2023-08-05-12-59-58-e40d035041a8adc16be014eddf54690d.png" class="center_image_tcFY" style="width:100%"></section>
<div class="theme-admonition theme-admonition-playtest alert alert--playtest admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 122.88 122.88"><path d="M61.44 0c33.93 0 61.44 27.51 61.44 61.44s-27.51 61.44-61.44 61.44S0 95.37 0 61.44 27.51 0 61.44 0m23.47 65.52c3.41-2.2 3.41-4.66 0-6.61L49.63 38.63c-2.78-1.75-5.69-.72-5.61 2.92l.11 40.98c.24 3.94 2.49 5.02 5.8 3.19z" style="fill-rule:evenodd;clip-rule:evenodd"></path></svg></span>test</div><div class="admonitionContent_vXIg"><mdxadmonitiontitle></mdxadmonitiontitle><p>Try jumping onto the brick and onto the platform from right underneath the platform. You should notice that Mario can’t jump onto the brick from underneath it, while he can do so on the platform.
You shall experiment with other effectors and their properties as well so that you know what features are supported or suitable for your game idea: some kind of boost, buoyancy, etc. Effectors is what you can use if you try to implement a <strong>pinball</strong> game with many different areas that can affect the kinematics of the ball .</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="physicsjoint2d">PhysicsJoint2D<a href="#physicsjoint2d" class="hash-link" aria-label="Direct link to PhysicsJoint2D" title="Direct link to PhysicsJoint2D">​</a></h3>
<p>The question boxes should bounce when Mario collides with it from below, then turn into an empty box. We can do this easily by creating an Animation Clip, but where&#x27;s the fun in that? Let&#x27;s simulate it with a spring. Unity provides us with various useful <strong>joints</strong>. It will save you so much time if you want to implement any basic joints: hinge, spring, slider, wheel, etc.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="springy-question-box">Springy Question Box<a href="#springy-question-box" class="hash-link" aria-label="Direct link to Springy Question Box" title="Direct link to Springy Question Box">​</a></h3>
<p>Unpack one of the Question Box prefabs on your scene, then create a parent GameObject to it (name it <code>Question-Box-Spring</code> or whatever you like) as follows, with <code>RigidBody2D</code> set to <code>Static</code> body type. This will be the <strong>anchor</strong> of your spring.</p>
<section><img src="/50033/assets/images/2023-08-05-13-15-48-2637445f51859d3ff39c126fbcf0fedf.png" class="center_image_tcFY" style="width:100%"></section>
<p>Then, add <code>RigidBody2D</code> to the question box. Also make sure that its Transform position is at <code>(0,0,0)</code> (means no relative coordinate wrt parent object). <span class="orange-bold">This is important to set your spring Anchor properly later</span>. Enable <code>Auto Mass</code> to reduce our headache in deciding what the box&#x27;s mass should be, let Unity standardize it based on the size of the Collider2D element attached to the GameObject. Finally, <strong>constant</strong> <code>X</code> position and <code>Z</code> rotation. We only want our box to bounce up and down along the Y-axis.</p>
<p>Then, add <code>SpringJoint2D</code> component, and set the properties as follows:</p>
<section><img src="/50033/assets/images/2023-08-05-13-18-18-6a3288962475f402056887e110960987.png" class="center_image_tcFY" style="width:100%"></section>
<p>Here&#x27;s a further explanation:</p>
<ol>
<li>We connect the spring to parent&#x27;s static Rigidbody, and <strong>disable</strong> collision with it (we want to have an &quot;invisible&quot; anchor, we don&#x27;t want our box to collide with it)</li>
<li>We set the <code>Connected Anchor</code> at <code>(0,1)</code> (this is local position, or in other words: the position of the anchor relative to the connected Rigidbody&#x27;s transform). That means to set the anchor of the spring to the connected Rigidbody in <code>Question-Box-Bounce</code> at 1 unit away in the y-axis direction from <code>Question-Box-Bounce</code>&#x27;s position on the Scene.</li>
<li><code>Distance</code> is set to <code>1</code> because we don&#x27;t want the spring to shorten once the game starts</li>
<li><code>Frequency</code> and <code>Damping Ratio</code> affects the &quot;feel&quot; of the spring</li>
</ol>
<div class="theme-admonition theme-admonition-playtest alert alert--playtest admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 122.88 122.88"><path d="M61.44 0c33.93 0 61.44 27.51 61.44 61.44s-27.51 61.44-61.44 61.44S0 95.37 0 61.44 27.51 0 61.44 0m23.47 65.52c3.41-2.2 3.41-4.66 0-6.61L49.63 38.63c-2.78-1.75-5.69-.72-5.61 2.92l.11 40.98c.24 3.94 2.49 5.02 5.8 3.19z" style="fill-rule:evenodd;clip-rule:evenodd"></path></svg></span>test</div><div class="admonitionContent_vXIg"><p>You should try out different property values for <code>Frequency</code> and <code>Damping Ratio</code> to get the right feel:</p><div class="center_div_ipNX"><video style="width:100%" class="center_video_QRNx" controls=""><source src="https://50033.s3.ap-southeast-1.amazonaws.com/week-2/bouncy.mp4" type="video/mp4">Your browser does not support the video tag.</video></div></div></div>
<div class="theme-admonition theme-admonition-warning alert alert--danger admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_vXIg"><p><span class="orange-bold">Note that all values in the inspector that you change during Play mode will disappear</span>. Make sure you only change these variables for testing purposes only, and set it later after you stop the game.</p></div></div>
<p>Once you are satisfied, set <code>Question-Box-Bounce</code> as a prefab.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="physics-material-2d">Physics Material 2D<a href="#physics-material-2d" class="hash-link" aria-label="Direct link to Physics Material 2D" title="Direct link to Physics Material 2D">​</a></h3>
<p>We can <strong>create</strong> a Physics Material to adjust the friction and bounce of 2D objects when they collide, then <strong>attach</strong> it to our collider. We don&#x27;t really need it in this game, but for demonstration purposes, lets create some &quot;bouncy cloud&quot; (called <a href="https://mario.fandom.com/wiki/Lakitu%27s_Cloud" target="_blank" rel="noopener noreferrer">Lakitu&#x27;s cloud</a>) for Mario. Create a new <code>Materials</code> folder in the Project Window. Then, right click and select Create &gt;&gt; 2D &gt;&gt; Physics Material 2D:</p>
<section><img src="/50033/assets/images/2023-08-05-13-44-06-eb97cfb1337dd1f5bb8f0b9ec34169d5.png" class="center_image_tcFY" style="width:50%"></section>
<p>Set the newly created material <code>Bounciness</code> to <code>1</code> (max value is 1, no loss of energy). Then, create a GameObject called <code>Bouncy-Cloud</code> (<a href="https://www.dropbox.com/scl/fi/kcyt9b3b2aqvq3oa0jpv0/lakitus-cloud.png?rlkey=bn9udbz2zcc68w3zounykpdhg&amp;dl=0" target="_blank" rel="noopener noreferrer">download the Sprite here</a>) with the following components and Layer. Hook up your newly created bouncy material in its Collider:</p>
<section><img src="/50033/assets/images/2023-08-05-13-46-46-ea0977315d50333c7352c21d13fed1e6.png" class="center_image_tcFY" style="width:100%"></section>
<div class="theme-admonition theme-admonition-playtest alert alert--playtest admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 122.88 122.88"><path d="M61.44 0c33.93 0 61.44 27.51 61.44 61.44s-27.51 61.44-61.44 61.44S0 95.37 0 61.44 27.51 0 61.44 0m23.47 65.52c3.41-2.2 3.41-4.66 0-6.61L49.63 38.63c-2.78-1.75-5.69-.72-5.61 2.92l.11 40.98c.24 3.94 2.49 5.02 5.8 3.19z" style="fill-rule:evenodd;clip-rule:evenodd"></path></svg></span>test</div><div class="admonitionContent_vXIg"><p>Well, that&#x27;s a bouncy cloud.</p><div class="center_div_ipNX"><video style="width:100%" class="center_video_QRNx" controls=""><source src="https://50033.s3.ap-southeast-1.amazonaws.com/week-2/bouncy-cloud.mp4" type="video/mp4">Your browser does not support the video tag.</video></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/50033/docs/babies/camera"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Camera Movement</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/50033/docs/babies/checkoff"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Checkoff</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#alternative-unity-tilemap" class="table-of-contents__link toc-highlight">Alternative: Unity Tilemap</a></li><li><a href="#constraint-z-rotation" class="table-of-contents__link toc-highlight">Constraint Z-Rotation</a></li><li><a href="#prefab" class="table-of-contents__link toc-highlight">Prefab</a><ul><li><a href="#bricks-and-question-box" class="table-of-contents__link toc-highlight">Bricks and Question Box</a></li><li><a href="#pipes" class="table-of-contents__link toc-highlight">Pipes</a></li><li><a href="#goomba" class="table-of-contents__link toc-highlight">Goomba</a></li><li><a href="#unpack-prefab" class="table-of-contents__link toc-highlight">Unpack Prefab</a></li></ul></li><li><a href="#layers" class="table-of-contents__link toc-highlight">Layers</a><ul><li><a href="#layer-based-collision" class="table-of-contents__link toc-highlight">Layer-based Collision</a></li><li><a href="#collision-with-obstacle-or-pipes" class="table-of-contents__link toc-highlight">Collision with Obstacle or Pipes</a></li><li><a href="#more-tags" class="table-of-contents__link toc-highlight">More Tags</a></li><li><a href="#layermask" class="table-of-contents__link toc-highlight">LayerMask</a></li></ul></li><li><a href="#profiler" class="table-of-contents__link toc-highlight">Profiler</a></li><li><a href="#physics-2d" class="table-of-contents__link toc-highlight">Physics 2D</a><ul><li><a href="#effector2d" class="table-of-contents__link toc-highlight">Effector2D</a></li><li><a href="#physicsjoint2d" class="table-of-contents__link toc-highlight">PhysicsJoint2D</a></li><li><a href="#springy-question-box" class="table-of-contents__link toc-highlight">Springy Question Box</a></li><li><a href="#physics-material-2d" class="table-of-contents__link toc-highlight">Physics Material 2D</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 50.033 Game Design and Development</div></div></div></footer></div>
</body>
</html>