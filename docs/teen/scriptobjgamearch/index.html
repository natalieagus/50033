<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-teen/scriptobjgamearch" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">ScriptableObject Game Architecture | Game Development and Design</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://natalieagus.github.io/50033/docs/teen/scriptobjgamearch"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ScriptableObject Game Architecture | Game Development and Design"><meta data-rh="true" name="description" content="The lab handout uses Super Mario Bros as assets to demonstrate certain Unity features and functionalities. You are free to follow along and submit it for checkoff, OR you can also create an entirely new project to demonstrate the requested feature(s)."><meta data-rh="true" property="og:description" content="The lab handout uses Super Mario Bros as assets to demonstrate certain Unity features and functionalities. You are free to follow along and submit it for checkoff, OR you can also create an entirely new project to demonstrate the requested feature(s)."><link data-rh="true" rel="icon" href="/50033/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://natalieagus.github.io/50033/docs/teen/scriptobjgamearch"><link data-rh="true" rel="alternate" href="https://natalieagus.github.io/50033/docs/teen/scriptobjgamearch" hreflang="en"><link data-rh="true" rel="alternate" href="https://natalieagus.github.io/50033/docs/teen/scriptobjgamearch" hreflang="x-default"><script src="https://cdn.jsdelivr.net/npm/brython@3.9.5/brython.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/brython@3.9.5/brython_stdlib.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/50033/assets/css/styles.9cdf0fa5.css">
<script src="/50033/assets/js/runtime~main.2385d031.js" defer="defer"></script>
<script src="/50033/assets/js/main.1246a269.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/50033/img/home-logo.svg"><link rel="preload" as="image" href="/50033/assets/images/singleton-archi-c1928ec9c01c579f99d96d2739e5a948.png"><link rel="preload" as="image" href="/50033/assets/images/soga-arch-471ecb0548cfa55af568d60f8e0d8a1a.png"><link rel="preload" as="image" href="/50033/assets/images/2025-10-02-09-17-51-c1f1f72a10bcbc05224d1b80e099dd29.png"><link rel="preload" as="image" href="/50033/assets/images/2023-09-22-16-16-26-cafd61a7520077a674700d8393e73e05.png"><link rel="preload" as="image" href="/50033/assets/images/2023-09-22-16-25-30-198f5f511382d72651bf58dd48bb99db.png"><link rel="preload" as="image" href="/50033/assets/images/gamerestart-soga-74421533f7fac78d8f02f4af76381ddd.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_jvwV"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/50033/"><div class="navbar__logo"><img src="/50033/img/home-logo.svg" alt="DDW Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/50033/img/home-logo.svg" alt="DDW Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">50.033</b></a><a class="navbar__item navbar__link" href="/50033/about/intro">About</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/50033/docs/syllabus">Lab Docs</a><a class="navbar__item navbar__link" href="/50033/resources/category/general-resources">Resources</a></div><div class="navbar__items navbar__items--right"><div class="searchBox_H2mL"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div><a href="https://github.com/natalieagus/50033" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_eExm"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_RSuS"><div class="sidebarViewport_pYEE"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/50033/"><img src="/50033/img/home-logo.svg" alt="DDW Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/50033/img/home-logo.svg" alt="DDW Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"><b>50.033</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/50033/docs/syllabus">Syllabus</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/50033/docs/category/unity-for-newborns">Unity for Newborns</a><button aria-label="Expand sidebar category &#x27;Unity for Newborns&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/50033/docs/category/unity-for-babies">Unity for Babies</a><button aria-label="Expand sidebar category &#x27;Unity for Babies&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/50033/docs/category/unity-for-toddlers">Unity for Toddlers</a><button aria-label="Expand sidebar category &#x27;Unity for Toddlers&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/50033/docs/category/unity-for-children">Unity for Children</a><button aria-label="Expand sidebar category &#x27;Unity for Children&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/50033/docs/category/unity-for-teens">Unity for Teens</a><button aria-label="Collapse sidebar category &#x27;Unity for Teens&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/50033/docs/teen/scriptobjgamearch">ScriptableObject Game Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/50033/docs/teen/fsm">Finite State Machine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/50033/docs/teen/checkoff">Checkoff</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/50033/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/50033/docs/category/unity-for-teens"><span itemprop="name">Unity for Teens</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">ScriptableObject Game Architecture</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>ScriptableObject Game Architecture</h1></header>
<div class="theme-admonition theme-admonition-caution alert alert--warning admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Lab Checkoff Requirements</div><div class="admonitionContent_vXIg"><p>The lab handout uses Super Mario Bros as assets to demonstrate certain Unity features and functionalities. You are free to follow along and submit it for checkoff, <strong>OR you can also create an entirely new project to demonstrate the requested feature(s)</strong>.</p><p>The requirement(s) for the lab checkoff can be found <a href="/50033/docs/teen/checkoff">here</a>.</p></div></div>
<div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_vXIg"><p>This <a href="https://www.youtube.com/watch?v=raQ3iHhE_Kk" target="_blank" rel="noopener noreferrer">amazing talk</a> inspires the existence of this section. We simply do not have enough time (unfortunately) to go into every single detailed implementation of common concepts such as game inventory, skill tree, etc but we hope that this quick introduction will point you into the right direction in the future.</p><p>If you like this architecture, we suggest checking out <a href="https://github.com/UnityTechnologies/open-project-1/tree/devlogs/2-scriptable-objects" target="_blank" rel="noopener noreferrer">this Unity Devlogs</a>.</p></div></div>
<p>This topic covers an entirely new game architecture which separates data from code to make your game more maintainable and all around pleasant to work with. You can choose to go down the Singleton Pattern Path for some appropriate parts of your project and utilise SO Architecture for others. The SO Architecture is <span class="orange-bold">not</span> strictly a replacement for the Singleton Pattern.</p>
<p>For example, Singleton Pattern and static pattern is ideal when you have a cache or repository for frequently accessed data (e.g., a level cache, asset loader, or a global configuration), as they can provide easy access from anywhere in the game without passing references explicitly. Singleton can be helpful to maintain <span class="orange-bold">consistency</span> and <span class="orange-bold">centralize control</span>.</p>
<p>On the other hand, SO Architecture is superior in promoting modularity and reusability, such as when you are creating different enemy types or power-ups, or creating <strong>reusable</strong> systems like event systems, dialogue systems, or inventory management systems that can be easily shared between different game elements. The SO Architecture provide for easy tweaking and tuning without code changes.</p>
<p>The decision regarding which approach to embrace is entirely yours. However, we take it upon ourselves to introduce you to another excellent game architecture leveraging Scriptable Objects. You&#x27;ll need to overhaul your current lab project, but the advantages make it worthwhile:</p>
<ul>
<li>Scenes are clean slates</li>
<li>No dependency between Systems and they are modular</li>
<li>Prefabs work on their own</li>
<li>Pluggable custom components</li>
</ul>
<div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Prototyping with your project idea</div><div class="admonitionContent_vXIg"><p>Since you would have to start prototyping your project anyway, it will be good to apply this week&#x27;s lab for that. Think about small features in your game that you need to implement as proof of concept. However, feel free to still follow along and use the Mario assets if you want.</p></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="preparation">Preparation<a href="#preparation" class="hash-link" aria-label="Direct link to Preparation" title="Direct link to Preparation">​</a></h2>
<p>We need at least two Scenes with completely clean slate. That’s right. <span class="orange-bold">Clean Slates</span>. We can’t reuse any of these Scripts anymore: GameManager, PowerupController, PlayerController, etc. To get you up to speed, you can:</p>
<ol>
<li>Copy your main menu or loading scene if any, and World-1-1 and World-1-2 into a new folder</li>
<li>Copy all prefabs used in these two worlds into a new folder, name it something else</li>
<li>Replace the prefabs with the new prefabs (same, just another copy)</li>
<li>Remove <strong>all scripts</strong> attached to any GameObject, do the same for the new set of prefabs</li>
</ol>
<p>Here&#x27;s a complete recording on what we do to prepare for this lab. Lots of the setup is about step 3 above. If you want to simply copy the entire project and work on the copy directly, you may do so.</p>
<div class="center_div_ipNX"><video style="width:100%" class="center_video_QRNx" controls=""><source src="https://50033.s3.ap-southeast-1.amazonaws.com/week-5/setup.mp4" type="video/mp4">Your browser does not support the video tag.</video></div>
<div class="theme-admonition theme-admonition-playtest alert alert--playtest admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 122.88 122.88"><path d="M61.44 0c33.93 0 61.44 27.51 61.44 61.44s-27.51 61.44-61.44 61.44S0 95.37 0 61.44 27.51 0 61.44 0m23.47 65.52c3.41-2.2 3.41-4.66 0-6.61L49.63 38.63c-2.78-1.75-5.69-.72-5.61 2.92l.11 40.98c.24 3.94 2.49 5.02 5.8 3.19z" style="fill-rule:evenodd;clip-rule:evenodd"></path></svg></span>test</div><div class="admonitionContent_vXIg"><p>If your main menu and loading screen is simple, you may leave it as-is. Some error might pop up because the event called in some animation clip, e.g: mario-jump animation doesn&#x27;t exist and it&#x27;s fine. We can fix that later. Also, do not forget to update the <strong>build setting</strong> to include these new scenes instead. The setting can be found at File &gt;&gt; Build Settings.</p></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="the-singleton-architecture">The Singleton Architecture<a href="#the-singleton-architecture" class="hash-link" aria-label="Direct link to The Singleton Architecture" title="Direct link to The Singleton Architecture">​</a></h2>
<p>If you&#x27;ve been following the lab faithfully so far, your current game architecture utilising Singletons is somewhat as follows:</p>
<section><img src="/50033/assets/images/singleton-archi-c1928ec9c01c579f99d96d2739e5a948.png" class="center_image_tcFY , invert-color" style="width:100%"></section>
<p>It&#x27;s <em>decent</em>, in a way that there&#x27;s no cross-referencing between scripts attached to gameObject instances, <strong>except</strong> to Singletons: <code>GameManager</code> and <code>PowerupManager</code>. Most chain of actions are triggered via events. Let&#x27;s recap the event flow for powerup-related events and score change.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="powerup-collection">Powerup Collection<a href="#powerup-collection" class="hash-link" aria-label="Direct link to Powerup Collection" title="Direct link to Powerup Collection">​</a></h3>
<p>Every Powerup box (brick or question box) is controlled by a script inheriting <code>BasePowerupController</code>.</p>
<ul>
<li>Whenever Mario hits a box (brick or question box), the <code>OnCollisionEnter2D</code> will be called by Unity, which will trigger an <span class="orange-bold">Animation</span> (bouncing box, etc).</li>
<li>From this animation, we call <code>SpawnPowerup()</code> on the powerup inside the box. Any powerup (coin, starman, magic mushroom, and one-up mushroom) are spawned via <code>SpawnPowerup()</code> method. <code>SpawnPowerup()</code> <strong>invokes</strong> <code>powerupCollected</code> event in PowerupManager Singleton, passing <strong>reference</strong> to itself in the process</li>
</ul>
<p>This calls the subscribers of <code>powerupCollected</code>: <code>FilterAndCastPowerup</code> which decides whether to invoke <code>powerupAffectsManager</code> or <code>powerupAffectsPlayer</code> based on the type of powerup invoking the event.</p>
<p>The subscribers of <code>powerupAffectsPlayer</code> or <code>powerupAffectsManager</code> (Mario or Manager) will then be called. Any gameObject subscribing to these two <code>powerupAffectsX</code> event should conform to <code>IPowerupApplicable</code> interface containing <code>RequestPowerupEffect</code> method, which is the method subscribing to <code>powerupAffectsX</code> event.</p>
<p>In <code>RequestPowerupEffect</code>, one simply passes itself (<code>this</code>) to the powerup triggering the chain of events from the start by calling <code>i.ApplyPowerup(this)</code>. Then, the <strong>actual</strong> implementation (how this powerup is affecting <code>this</code>) is implemented in that powerup script itself.</p>
<p>For instance, when Mario hits a question box containing MagicMushroom, it triggers <code>SpawnPowerup()</code> which will animate the spawning of the MagicMushroom.</p>
<ul>
<li>When Mario <span class="orange-bold">collides</span> with the MagicMushroom, <code>OnCollisionEnter2D</code> on MagicMushroom&#x27;s BasePowerup will be triggered, which will <strong>invoke</strong> <code>powerupCollected</code> event, passing itself in the process.</li>
<li><code>FilterAndCastPowerup</code> (<span class="orange-bold">subscriber</span> of <code>powerupCollected</code>) will examine the <code>PowerupType</code> triggering this event (which is MagicMushroom) and hence it <span class="orange-bold">invokes</span> <code>powerupAffectsPlayer</code> event, passing MagicMushroom instance as the argument.</li>
<li>This <span class="orange-bold">triggers</span> the callback <code>RequestPowerupEffect</code> in <code>PlayerMovement.cs</code> attached on Mario.<!-- -->
<ul>
<li>In <code>RequestPowerupEffect</code>, we pass <code>this</code> (which is Mario gameobject instance) to MagicMushroom via <code>ApplyPowerup</code> method.</li>
</ul>
</li>
<li>Finally, in the MagicMushroomPowerup script we can decide <em>what the effect of this powerup is to Mario</em>: which is to call <code>MakeSuperMario()</code> method implemented in <code>PlayerMovement</code>.</li>
</ul>
<div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_vXIg"><p>This is just one of the suggested method to prevent cross-referencing of scripts that needed to be done manually via inspector during runtime. The main idea is to modularise the implementation of the powerup effect as much as possible, implementing parts concerning that instances in the instance script and nowhere else. For instance: it is the MagicMushroom&#x27;s responsibility to call Mario&#x27;s: MakeSuperMario, and it is Mario&#x27;s responsibility to decide what &quot;Super Mario&quot; should be.</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="score-update">Score Update<a href="#score-update" class="hash-link" aria-label="Direct link to Score Update" title="Direct link to Score Update">​</a></h3>
<p>There are two ways currently to increase the current score: by stomping on Goomba from above or spawning a coin. Both <code>EnemyController</code> and <code>CoinPowerup</code> calls <code>GameManager.instance.IncreaseScore(int value)</code> anytime those conditions are valid. This calls the <code>SetScore</code> method inside <code>GameManager</code>, which invokes the <code>scoreChange</code> event and eventually triggers its subscriber: <code>SetScore</code> in <code>HUDManager</code> to update the UI. The actual score is stored at <code>GameScore</code>, an <code>IntVariable</code> Scriptable Object, which is updated inside <code>IncreaseScore</code> method.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="thoughts">Thoughts<a href="#thoughts" class="hash-link" aria-label="Direct link to Thoughts" title="Direct link to Thoughts">​</a></h2>
<p>The Singleton pattern ensures that a class has only one instance and provides a global point of access to that instance. In Unity, it is often used to manage game-wide systems or managers that need to exist throughout the entire game&#x27;s lifetime. They are commonly used for managing things like GameManager, AudioManager, UIManager, InputManager, and other central systems. These classes need to be accessible from different parts of the game, and a Singleton pattern ensures there is only one instance to coordinate these tasks. It is relatively easy to implement, but can lead to <span class="orange-bold">tight coupling</span> between the systems as discussed before. It can also be cumbersome to sharing data between different scenes or across multiple game objects.</p>
<p>We also utilise some Scriptable Objects to manage data assets (like score) that can be shared across different parts of the game, including scenes, game objects, and scripts. They are primarily used for <em>storing</em> and <em>sharing</em> data.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="scriptable-object-game-architecture">Scriptable Object Game Architecture<a href="#scriptable-object-game-architecture" class="hash-link" aria-label="Direct link to Scriptable Object Game Architecture" title="Direct link to Scriptable Object Game Architecture">​</a></h2>
<p>In this new game architecture, we take everything one step further to promote a more modular and decoupled architecture. There&#x27;s <strong>no</strong> interaction between scripts (well, at least not between scripts of unrelated gameObjects, interaction between scripts in the same perfab is understandable).</p>
<p>We first create various <code>GameEvents</code> based on Scriptable Objects. Each instance can subscribe to it <code>OnEnable()</code>, and unsubscribe from it <code>OnDisable()</code>. As per the previous lab, we also use SO to store persistent runtime data so that new instances in the next scene can load values from there. This way, we do not need to implement any object as a Singleton.</p>
<div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_vXIg"><mdxadmonitiontitle></mdxadmonitiontitle><p>Creating events and storing it in SO as opposed to creating UnityEvents allow us to <em>store</em> references of listeners without having to tie the events onto an existing GameObject on the Scene.</p><p>This is actually the main reason the ScriptableObject-based event pattern exists. It <span class="orange-bold">decouples</span> the event system from specific scene objects.</p></div></div>
<p>A sketch of the architecture is as follows:</p>
<section><img src="/50033/assets/images/soga-arch-471ecb0548cfa55af568d60f8e0d8a1a.png" class="center_image_tcFY , invert-color" style="width:100%"></section>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="scriptable-object-event-system">Scriptable Object Event System<a href="#scriptable-object-event-system" class="hash-link" aria-label="Direct link to Scriptable Object Event System" title="Direct link to Scriptable Object Event System">​</a></h3>
<p>Create two new scripts called <code>GameEvent.cs</code> and <code>GameEventListener.cs</code>. This SO-based event will store a <strong>list</strong> of <code>GameEventListeners</code>, and notify them whenever the GameEvent is <strong>Raised</strong>.</p>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">GameEvent.cs</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">GameEventListener.cs</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#2a2734;--prism-color:#9a86fd"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar" style="background-color:#2a2734;color:#9a86fd"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9a86fd"><span class="token keyword" style="color:#ffcc99">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token namespace punctuation" style="opacity:0.7;color:#6c6783">.</span><span class="token namespace" style="opacity:0.7">Collections</span><span class="token namespace punctuation" style="opacity:0.7;color:#6c6783">.</span><span class="token namespace" style="opacity:0.7">Generic</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token keyword" style="color:#ffcc99">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">Unity</span><span class="token namespace punctuation" style="opacity:0.7;color:#6c6783">.</span><span class="token namespace" style="opacity:0.7">VisualScripting</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token keyword" style="color:#ffcc99">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">class</span><span class="token plain"> </span><span class="token class-name">GameEvent</span><span class="token class-name punctuation" style="color:#6c6783">&lt;</span><span class="token class-name">T</span><span class="token class-name punctuation" style="color:#6c6783">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token type-list class-name">ScriptableObject</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">private</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">readonly</span><span class="token plain"> </span><span class="token class-name">List</span><span class="token class-name punctuation" style="color:#6c6783">&lt;</span><span class="token class-name">GameEventListener</span><span class="token class-name punctuation" style="color:#6c6783">&lt;</span><span class="token class-name">T</span><span class="token class-name punctuation" style="color:#6c6783">&gt;</span><span class="token class-name punctuation" style="color:#6c6783">&gt;</span><span class="token plain"> eventListeners </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">List</span><span class="token constructor-invocation class-name punctuation" style="color:#6c6783">&lt;</span><span class="token constructor-invocation class-name">GameEventListener</span><span class="token constructor-invocation class-name punctuation" style="color:#6c6783">&lt;</span><span class="token constructor-invocation class-name">T</span><span class="token constructor-invocation class-name punctuation" style="color:#6c6783">&gt;</span><span class="token constructor-invocation class-name punctuation" style="color:#6c6783">&gt;</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">Raise</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token class-name">T</span><span class="token plain"> data</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token class-name keyword" style="color:#ffcc99">int</span><span class="token plain"> i </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> eventListeners</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">Count </span><span class="token operator" style="color:#e09142">-</span><span class="token plain"> </span><span class="token number" style="color:#e09142">1</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"> i </span><span class="token operator" style="color:#e09142">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:#e09142">0</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"> i</span><span class="token operator" style="color:#e09142">--</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            eventListeners</span><span class="token punctuation" style="color:#6c6783">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#6c6783">]</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">OnEventRaised</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">RegisterListener</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token class-name">GameEventListener</span><span class="token class-name punctuation" style="color:#6c6783">&lt;</span><span class="token class-name">T</span><span class="token class-name punctuation" style="color:#6c6783">&gt;</span><span class="token plain"> listener</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token operator" style="color:#e09142">!</span><span class="token plain">eventListeners</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">Contains</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">listener</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            eventListeners</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">Add</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">listener</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">UnregisterListener</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token class-name">GameEventListener</span><span class="token class-name punctuation" style="color:#6c6783">&lt;</span><span class="token class-name">T</span><span class="token class-name punctuation" style="color:#6c6783">&gt;</span><span class="token plain"> listener</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        </span><span class="token keyword" style="color:#ffcc99">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">eventListeners</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">Contains</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">listener</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            eventListeners</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">Remove</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">listener</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token punctuation" style="color:#6c6783">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#2a2734;--prism-color:#9a86fd"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar" style="background-color:#2a2734;color:#9a86fd"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token keyword" style="color:#ffcc99">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token keyword" style="color:#ffcc99">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token namespace punctuation" style="opacity:0.7;color:#6c6783">.</span><span class="token namespace" style="opacity:0.7">Events</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token comment" style="color:#6c6783">// if attached to an object that might be disabled, callback will not work</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token comment" style="color:#6c6783">// attach it on a parent object that wont be disabled</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">class</span><span class="token plain"> </span><span class="token class-name">GameEventListener</span><span class="token class-name punctuation" style="color:#6c6783">&lt;</span><span class="token class-name">T</span><span class="token class-name punctuation" style="color:#6c6783">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token class-name">GameEvent</span><span class="token class-name punctuation" style="color:#6c6783">&lt;</span><span class="token class-name">T</span><span class="token class-name punctuation" style="color:#6c6783">&gt;</span><span class="token plain"> Event</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token class-name">UnityEvent</span><span class="token class-name punctuation" style="color:#6c6783">&lt;</span><span class="token class-name">T</span><span class="token class-name punctuation" style="color:#6c6783">&gt;</span><span class="token plain"> Response</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">OnEnable</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        Event</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">RegisterListener</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token keyword" style="color:#ffcc99">this</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token comment" style="color:#6c6783">// This is also called when the object is destroyed and can be used for any cleanup code. When scripts are reloaded after compilation has finished, OnDisable will be called, followed by an OnEnable after the script has been loaded.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">OnDisable</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        Event</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">UnregisterListener</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token keyword" style="color:#ffcc99">this</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">OnEventRaised</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token class-name">T</span><span class="token plain"> data</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        Response</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">Invoke</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div>
<p>These are currently of a <code>generic</code> type because <code>UnityEvent</code> can have any varying signature: zero parameter, one parameter, etc.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="create-subclasses-that-pins-t">Create Subclasses that Pins <code>T</code><a href="#create-subclasses-that-pins-t" class="hash-link" aria-label="Direct link to create-subclasses-that-pins-t" title="Direct link to create-subclasses-that-pins-t">​</a></h4>
<p>The goal of this architecture is to conveniently add the listener script as components and then drag and drop the SO events via the inspector to link up the callbacks as such:</p>
<section><img src="/50033/assets/images/2025-10-02-09-17-51-c1f1f72a10bcbc05224d1b80e099dd29.png" class="center_image_tcFY" style="width:100%"></section>
<p>However, you <span class="red-bold">cannot</span> drag a <code>GameEvent&lt;T&gt;</code> into the Inspector unless <code>T</code> is already known (Unity can’t serialize open generic fields).</p>
<ul>
<li>By subclassing, you “fix” the generic parameter at design time</li>
<li>Unity then treats IntGameEvent or <code>SimpleGameEvent</code> like any other ScriptableObject asset</li>
</ul>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_vXIg"><p>Unity won’t show open generics in the Inspector. You always need to give it a <strong>concrete</strong> type. Therefore you need a subclass that pins <code>T</code>.</p></div></div>
<p>For the sake of the lab, we need at least <em>three</em> different types: no argument, a single <code>int</code> type argument, and a single <code>IPowerup</code> type argument. For each type, we need a pair of scripts: the GameEvent and the GameEventListener variant.</p>
<p>The following creates the &quot;no argument&quot; (custom <code>Void</code>) variant:</p>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">SimpleGameEvent.cs</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">SimpleGameEventListener.cs</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#2a2734;--prism-color:#9a86fd"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar" style="background-color:#2a2734;color:#9a86fd"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9a86fd"><span class="token keyword" style="color:#ffcc99">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token namespace punctuation" style="opacity:0.7;color:#6c6783">.</span><span class="token namespace" style="opacity:0.7">Collections</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token keyword" style="color:#ffcc99">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token namespace punctuation" style="opacity:0.7;color:#6c6783">.</span><span class="token namespace" style="opacity:0.7">Collections</span><span class="token namespace punctuation" style="opacity:0.7;color:#6c6783">.</span><span class="token namespace" style="opacity:0.7">Generic</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token keyword" style="color:#ffcc99">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">class</span><span class="token plain"> </span><span class="token class-name">Void</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"> </span><span class="token comment" style="color:#6c6783">// dummy class</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token comment" style="color:#6c6783">// no arguments</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token punctuation" style="color:#6c6783">[</span><span class="token function" style="color:#9a86fd">CreateAssetMenu</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">fileName </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token string" style="color:#ffcc99">&quot;SimpleGameEvent&quot;</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> menuName </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token string" style="color:#ffcc99">&quot;ScriptableObjects/SimpleGameEvent&quot;</span><span class="token punctuation" style="color:#6c6783">,</span><span class="token plain"> order </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> </span><span class="token number" style="color:#e09142">3</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">class</span><span class="token plain"> </span><span class="token class-name">SimpleGameEvent</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token type-list class-name">GameEvent</span><span class="token type-list class-name punctuation" style="color:#6c6783">&lt;</span><span class="token type-list class-name">Void</span><span class="token type-list class-name punctuation" style="color:#6c6783">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token comment" style="color:#6c6783">// create new method that doesn&#x27;t accept any argument</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token comment" style="color:#6c6783">// calls base&#x27; Raise with Void arg</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">Raise</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"> </span><span class="token operator" style="color:#e09142">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">Raise</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token keyword" style="color:#ffcc99">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">Void</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"> </span><span class="token comment" style="color:#6c6783">// automatically create new Void data instead</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token punctuation" style="color:#6c6783">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#2a2734;--prism-color:#9a86fd"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar" style="background-color:#2a2734;color:#9a86fd"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9a86fd"><span class="token keyword" style="color:#ffcc99">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token namespace punctuation" style="opacity:0.7;color:#6c6783">.</span><span class="token namespace" style="opacity:0.7">Collections</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token keyword" style="color:#ffcc99">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token namespace punctuation" style="opacity:0.7;color:#6c6783">.</span><span class="token namespace" style="opacity:0.7">Collections</span><span class="token namespace punctuation" style="opacity:0.7;color:#6c6783">.</span><span class="token namespace" style="opacity:0.7">Generic</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token keyword" style="color:#ffcc99">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc99">class</span><span class="token plain"> </span><span class="token class-name">SimpleGameEventListener</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">:</span><span class="token plain"> </span><span class="token type-list class-name">GameEventListener</span><span class="token type-list class-name punctuation" style="color:#6c6783">&lt;</span><span class="token type-list class-name">Void</span><span class="token type-list class-name punctuation" style="color:#6c6783">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain"></span><span class="token punctuation" style="color:#6c6783">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div>
<p>Do the same for the other two types (<code>int</code> and <code>IPowerup</code>).</p>
<div class="center_div_ipNX"><video style="width:100%" class="center_video_QRNx" controls=""><source src="https://50033.s3.ap-southeast-1.amazonaws.com/week-5/setup-events.mp4" type="video/mp4">Your browser does not support the video tag.</video></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="create-game-events">Create Game Events<a href="#create-game-events" class="hash-link" aria-label="Direct link to Create Game Events" title="Direct link to Create Game Events">​</a></h3>
<p>When done, create some SO Game Events as follows (your actual number of events may vary, but if we follow the suggested diagram then you shall make 11 events). Rename them properly based on their type.</p>
<div class="center_div_ipNX"><video style="width:100%" class="center_video_QRNx" controls=""><source src="https://50033.s3.ap-southeast-1.amazonaws.com/week-5/create-game-events.mp4" type="video/mp4">Your browser does not support the video tag.</video></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="subscriberegister-to-game-events-with-gameeventlistener">Subscribe/Register to Game Events with GameEventListener<a href="#subscriberegister-to-game-events-with-gameeventlistener" class="hash-link" aria-label="Direct link to Subscribe/Register to Game Events with GameEventListener" title="Direct link to Subscribe/Register to Game Events with GameEventListener">​</a></h3>
<p>Once created, each <code>GameEvent</code> serves as a &quot;container&quot; that store a list of GameEventListeners. Whenever any script calls their <code>Raise</code> method, it will call the <code>OnEventsRaised</code> method on all of its GameEventListener (subscribers), which will then call a list of methods registered under <code>Response</code> in <code>GameEventListener</code>. For instance, we want to <strong>reset</strong> our Camera to its starting location whenever <code>OnGameRestart</code> event is Raised. When we were using the Singleton Method, we first register some callback <code>GameRestart()</code> in <code>CameraController.cs</code>:</p>
<div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#2a2734;--prism-color:#9a86fd"><div class="codeBlockTitle_Ktv7">CameraController.cs</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar" style="background-color:#2a2734;color:#9a86fd"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#9a86fd"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">Start</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#9a86fd"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#9a86fd"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        GameManager</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">instance</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">gameRestart</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">AddListener</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">GameRestart</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#9a86fd"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#9a86fd"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#9a86fd"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">GameRestart</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#9a86fd"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#9a86fd"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token comment" style="color:#6c6783">// reset camera position</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#9a86fd"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        transform</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">position </span><span class="token operator" style="color:#e09142">=</span><span class="token plain"> startPosition</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#9a86fd"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Delete</strong> line 3 above, and we register <code>GameRestart</code> as a callback to <code>OnGameRestart</code> Game Event using <code>SimpleGameEventListener</code> Script component as follows:</p>
<section><img src="/50033/assets/images/2023-09-22-16-16-26-cafd61a7520077a674700d8393e73e05.png" class="center_image_tcFY" style="width:100%"></section>
<p>The <code>Event</code> field of the SimpleGameEventListener script is linked to <code>OnGameRestart</code> SO GameEvent, and as its <code>Response</code>, we register <code>CameraController</code>&#x27;s <code>GameRestart()</code> method. When another script calls <code>OnGameRestart.Raise()</code>, this will automatically cause <code>OnGameRestart</code> to loop through its <code>SimpleEventGameListeners</code> and call <code>OnEventRaised()</code> on it. This will then trigger <code>Response.Invoke()</code> where <code>Response</code> contains <code>GameRestart()</code> method from <code>CameraController</code>. Finally, the method <code>GameRestart()</code> is performed on the <code>CameraController</code>&#x27;s <span class="orange-bold">instance</span>.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="raising-the-gameevent">Raising the GameEvent<a href="#raising-the-gameevent" class="hash-link" aria-label="Direct link to Raising the GameEvent" title="Direct link to Raising the GameEvent">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="method-1-using-unityevent-no-params">Method 1: Using UnityEvent (No Params)<a href="#method-1-using-unityevent-no-params" class="hash-link" aria-label="Direct link to Method 1: Using UnityEvent (No Params)" title="Direct link to Method 1: Using UnityEvent (No Params)">​</a></h4>
<p>What is this <em>other</em> script who can call <code>OnGameRestart.Raise()</code>? One possible candidate is the <code>RestartButtonController</code>. We can have a following script that leverages on UnityEvent:</p>
<div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#2a2734;--prism-color:#9a86fd"><div class="codeBlockTitle_Ktv7">RestartButtonController.cs</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar" style="background-color:#2a2734;color:#9a86fd"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token class-name">UnityEvent</span><span class="token plain"> gameRestart</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">ButtonClick</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        gameRestart</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">Invoke</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Attach this to the restart Button, and set <code>ButtonClick()</code> as the callback of the button component. Then link <code>OnGameRestart</code> SimpleGameEvent SO as <code>gameRestart</code> UnityEvent that is invoked by clicking the restart button.</p>
<section><img src="/50033/assets/images/2023-09-22-16-25-30-198f5f511382d72651bf58dd48bb99db.png" class="center_image_tcFY" style="width:100%"></section>
<p>Basically in the Inspector, you drag in your <code>SimpleGameEvent</code> ScriptableObject instance (e.g. <code>OnGameRestart</code>):</p>
<ul>
<li>Then you hook up <code>SimpleGameEvent.Raise</code> to be called.</li>
<li>Since SimpleGameEvent inherits from <code>GameEvent&lt;Object&gt;</code>, its <code>Raise(Object data)</code> method needs an argument.</li>
<li>UnityEvents can’t supply null automatically, so you usually either:<!-- -->
<ul>
<li>Set the argument in the inspector (often just <code>None</code> if you don’t care), or</li>
<li>Make a <code>Raise()</code> overload in <code>SimpleGameEvent</code> that ignores data and just raises with null.</li>
</ul>
</li>
</ul>
<p>Now you can make Mario and Goomba GameObject to do the same: attach a SimpleGameEvent script to both gameObjects, with <code>events</code> field referring to SO <code>OnGameRestart</code> and a <code>GameRestart()</code> callback in each of its controller as follows. The video below also shows that each gameObject (e.g: Mario) can contain multiple <code>GameEventListeners</code> so that you can register various callbacks from any script in that gameObject.</p>
<div class="center_div_ipNX"><video style="width:100%" class="center_video_QRNx" controls=""><source src="https://50033.s3.ap-southeast-1.amazonaws.com/week-5/game-restart.mp4" type="video/mp4">Your browser does not support the video tag.</video></div>
<br>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="method-2-direct-reference-approach">Method 2: Direct Reference Approach<a href="#method-2-direct-reference-approach" class="hash-link" aria-label="Direct link to Method 2: Direct Reference Approach" title="Direct link to Method 2: Direct Reference Approach">​</a></h4>
<div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#2a2734;--prism-color:#9a86fd"><div class="codeBlockTitle_Ktv7">PlayerController.cs</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar" style="background-color:#2a2734;color:#9a86fd"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9a86fd"><span class="token keyword" style="color:#ffcc99">public</span><span class="token plain"> </span><span class="token class-name">GameEvent</span><span class="token class-name punctuation" style="color:#6c6783">&lt;</span><span class="token class-name">Object</span><span class="token class-name punctuation" style="color:#6c6783">&gt;</span><span class="token plain"> onDamagePlayer</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">  </span><span class="token return-type class-name keyword" style="color:#ffcc99">void</span><span class="token plain"> </span><span class="token function" style="color:#9a86fd">OnTriggerEnter2D</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token class-name">Collider2D</span><span class="token plain"> other</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">  </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">      </span><span class="token keyword" style="color:#ffcc99">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#6c6783">(</span><span class="token plain">other</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token plain">gameObject</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">CompareTag</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token string" style="color:#ffcc99">&quot;Player&quot;</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">      </span><span class="token punctuation" style="color:#6c6783">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">          onDamagePlayer</span><span class="token punctuation" style="color:#6c6783">.</span><span class="token function" style="color:#9a86fd">Raise</span><span class="token punctuation" style="color:#6c6783">(</span><span class="token punctuation" style="color:#6c6783">)</span><span class="token punctuation" style="color:#6c6783">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">      </span><span class="token punctuation" style="color:#6c6783">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9a86fd"><span class="token plain">  </span><span class="token punctuation" style="color:#6c6783">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here you hold a direct reference to the <code>GameEvent&lt;Object&gt;</code> asset (in the inspector you assign the <code>OnDamagePlayer</code> SO).</p>
<ul>
<li>You can now <code>raise</code> it in code directly, passing arguments as the payload: in this case since <code>onDamagePlayer</code> is an event of <code>Void</code> type then we don&#x27;t pass any arguments.</li>
<li>Listeners get that reference in their callback.<!-- -->
<br>
</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="key-distinction">Key Distinction<a href="#key-distinction" class="hash-link" aria-label="Direct link to Key Distinction" title="Direct link to Key Distinction">​</a></h4>
<p>Using <code>UnityEvent</code> decouples code from the event system. The Button just says “when clicked, call whatever I wired up in the inspector.” You can assign <code>SimpleGameEvent.Raise</code> with or without arguments. More designer-friendly.</p>
<p>Using <code>GameEvent</code> field in code results in <strong>tighter</strong> coupling. You’re explicitly saying “this script raises this event.” You can pass contextual data (this, some ScriptableObject, etc.) at runtime.</p>
<div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_vXIg"><p>Regardless of which method you choose, it is <span class="red-bold">important</span> for you to be able to trace properly the chain of events that make this works. The following diagram illustrates what actually happened from the moment restart button is clicked to the moment all <code>GameRestart()</code> functions in the scripts attached to Mario, Camera, and all Goombas are called:</p><section><img src="/50033/assets/images/gamerestart-soga-74421533f7fac78d8f02f4af76381ddd.png" class="center_image_tcFY , invert-color" style="width:100%"></section></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="migrate">Migrate<a href="#migrate" class="hash-link" aria-label="Direct link to Migrate" title="Direct link to Migrate">​</a></h2>
<p>Now that you know how ScriptableObject Event System work, carefully migrate your entire project (all scenes) to adopt this new event system.</p>
<ul>
<li>Delete <span class="orange-bold">each</span> old <code>GameManager.instance.[event].AddListener(CallbackMethod)</code> line, and replace it by attaching the corresponding <code>GameEventListener</code> script to the GameObject</li>
<li>Ensure that you select the correct <code>GameEventListener</code> type (no argument <code>Void</code>, <code>int</code>, or <code>IPowerup</code> type argument)</li>
<li>Link up the right <code>GameEvent</code> in the Inspector to match that <code>[event]</code> you are replacing</li>
<li>Link up <code>CallbackMethod</code> at the <code>GameEventListener</code> Inspector. Make sure that this method is <span class="orange-bold">public</span></li>
</ul>
<p>After a few tries, the procedure should be quite standard. Firstly, create the <code>GameEvent</code>s.</p>
<p>Secondly, figure out which callback methods should be run for each event. Create a <code>public</code> callback method where you will handle a particular event in a script. Then, on the same gameObject where that script is attached to, add a <code>GameEventListener</code> script with that <code>public</code> method as the <code>Response</code>.</p>
<p>Thirdly, figure out which scripts shall <code>Raise</code> the events. To <code>Raise</code> a <code>GameEvent</code>, attach that <code>GameEvent</code> <code>Raise</code> method as a listener to <code>public UnityEvent event</code> member in that script that wants to <em>cast</em> (raise) it, for as written in the <code>RestartButtonController</code> above.</p>
<p>Here&#x27;s a quick video for your reference:</p>
<div class="center_div_ipNX"><video style="width:100%" class="center_video_QRNx" controls=""><source src="https://50033.s3.ap-southeast-1.amazonaws.com/week-5/migrate.mp4" type="video/mp4">Your browser does not support the video tag.</video></div>
<div class="theme-admonition theme-admonition-caution alert alert--warning admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>For reference only</div><div class="admonitionContent_vXIg"><p>Your actual implementation might differ and that&#x27;s alright, so don&#x27;t be alarmed. As long as the game works as intended with this new architecture, that&#x27;s fine.</p></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h2>
<p>A <code>UnityEvent</code> field on a <code>MonoBehaviour</code> is basically a container of listeners stored in that component instance. When the component is destroyed or disabled, that “container” (and all the registered listeners) goes away with it.</p>
<p>On the other hand, the <code>GameEvent&lt;T&gt;</code> ScriptableObject is a <strong>shared</strong> event channel asset.</p>
<ul>
<li>Listeners live inside the channel asset that <em>all</em> scenes can share</li>
<li>The event channel asset persists across scenes and can be reused anywhere</li>
</ul>
<div class="theme-admonition theme-admonition-success alert alert--success admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Learning Point</div><div class="admonitionContent_vXIg"><p><strong>UnityEvent</strong>: <em>listeners live inside the scene instance</em>
<strong>ScriptableObject GameEvent</strong>: <em>listeners live inside the channel asset that all scenes can share</em></p></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/50033/docs/category/unity-for-teens"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Unity for Teens</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/50033/docs/teen/fsm"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Finite State Machine</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#preparation" class="table-of-contents__link toc-highlight">Preparation</a></li><li><a href="#the-singleton-architecture" class="table-of-contents__link toc-highlight">The Singleton Architecture</a><ul><li><a href="#powerup-collection" class="table-of-contents__link toc-highlight">Powerup Collection</a></li><li><a href="#score-update" class="table-of-contents__link toc-highlight">Score Update</a></li></ul></li><li><a href="#thoughts" class="table-of-contents__link toc-highlight">Thoughts</a></li><li><a href="#scriptable-object-game-architecture" class="table-of-contents__link toc-highlight">Scriptable Object Game Architecture</a><ul><li><a href="#scriptable-object-event-system" class="table-of-contents__link toc-highlight">Scriptable Object Event System</a></li><li><a href="#create-game-events" class="table-of-contents__link toc-highlight">Create Game Events</a></li><li><a href="#subscriberegister-to-game-events-with-gameeventlistener" class="table-of-contents__link toc-highlight">Subscribe/Register to Game Events with GameEventListener</a></li><li><a href="#raising-the-gameevent" class="table-of-contents__link toc-highlight">Raising the GameEvent</a></li></ul></li><li><a href="#migrate" class="table-of-contents__link toc-highlight">Migrate</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 50.033 Game Design and Development</div></div></div></footer></div>
</body>
</html>